/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/scrape/route";
exports.ids = ["app/api/scrape/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fscrape%2Froute&page=%2Fapi%2Fscrape%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscrape%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fscrape%2Froute&page=%2Fapi%2Fscrape%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscrape%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_runner_workspace_src_app_api_scrape_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/scrape/route.ts */ \"(rsc)/./src/app/api/scrape/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/scrape/route\",\n        pathname: \"/api/scrape\",\n        filename: \"route\",\n        bundlePath: \"app/api/scrape/route\"\n    },\n    resolvedPagePath: \"/home/runner/workspace/src/app/api/scrape/route.ts\",\n    nextConfigOutput,\n    userland: _home_runner_workspace_src_app_api_scrape_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZzY3JhcGUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnNjcmFwZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnNjcmFwZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNFO0FBQy9FO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL3NyYy9hcHAvYXBpL3NjcmFwZS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc2NyYXBlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc2NyYXBlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9zY3JhcGUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL3NyYy9hcHAvYXBpL3NjcmFwZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fscrape%2Froute&page=%2Fapi%2Fscrape%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscrape%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/scrape/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/scrape/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_scraper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/scraper */ \"(rsc)/./src/lib/scraper.ts\");\n\n\nasync function POST() {\n    try {\n        console.log('Starting manual scraping process...');\n        const scraper = new _lib_scraper__WEBPACK_IMPORTED_MODULE_1__.VLRScraper();\n        const result = await scraper.scrapeAllMatches();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: result.success,\n            data: result,\n            message: result.success ? `Successfully scraped ${result.matches_scraped} new matches and updated ${result.matches_updated} existing matches` : 'Scraping completed with errors'\n        });\n    } catch (error) {\n        console.error('Error during manual scraping:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Failed to complete scraping process',\n            message: String(error)\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: false,\n        error: 'Method not allowed. Use POST to trigger scraping.'\n    }, {\n        status: 405\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9zY3JhcGUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEyQztBQUNBO0FBR3BDLGVBQWVFO0lBQ3BCLElBQUk7UUFDRkMsUUFBUUMsR0FBRyxDQUFDO1FBRVosTUFBTUMsVUFBVSxJQUFJSixvREFBVUE7UUFDOUIsTUFBTUssU0FBUyxNQUFNRCxRQUFRRSxnQkFBZ0I7UUFFN0MsT0FBT1AscURBQVlBLENBQUNRLElBQUksQ0FBQztZQUN2QkMsU0FBU0gsT0FBT0csT0FBTztZQUN2QkMsTUFBTUo7WUFDTkssU0FBU0wsT0FBT0csT0FBTyxHQUNuQixDQUFDLHFCQUFxQixFQUFFSCxPQUFPTSxlQUFlLENBQUMseUJBQXlCLEVBQUVOLE9BQU9PLGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxHQUNuSDtRQUNOO0lBRUYsRUFBRSxPQUFPQyxPQUFPO1FBQ2RYLFFBQVFXLEtBQUssQ0FBQyxpQ0FBaUNBO1FBRS9DLE9BQU9kLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVEssT0FBTztZQUNQSCxTQUFTSSxPQUFPRDtRQUNsQixHQUF3QjtZQUFFRSxRQUFRO1FBQUk7SUFDeEM7QUFDRjtBQUVPLGVBQWVDO0lBQ3BCLE9BQU9qQixxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO1FBQ3ZCQyxTQUFTO1FBQ1RLLE9BQU87SUFDVCxHQUFHO1FBQUVFLFFBQVE7SUFBSTtBQUNuQiIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9zcmMvYXBwL2FwaS9zY3JhcGUvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgVkxSU2NyYXBlciB9IGZyb20gJ0AvbGliL3NjcmFwZXInO1xuaW1wb3J0IHsgQXBpUmVzcG9uc2UsIFNjcmFwZVJlc3BvbnNlIH0gZnJvbSAnQC90eXBlcyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBtYW51YWwgc2NyYXBpbmcgcHJvY2Vzcy4uLicpO1xuICAgIFxuICAgIGNvbnN0IHNjcmFwZXIgPSBuZXcgVkxSU2NyYXBlcigpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNjcmFwZXIuc2NyYXBlQWxsTWF0Y2hlcygpO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHJlc3VsdC5zdWNjZXNzLFxuICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgbWVzc2FnZTogcmVzdWx0LnN1Y2Nlc3MgXG4gICAgICAgID8gYFN1Y2Nlc3NmdWxseSBzY3JhcGVkICR7cmVzdWx0Lm1hdGNoZXNfc2NyYXBlZH0gbmV3IG1hdGNoZXMgYW5kIHVwZGF0ZWQgJHtyZXN1bHQubWF0Y2hlc191cGRhdGVkfSBleGlzdGluZyBtYXRjaGVzYFxuICAgICAgICA6ICdTY3JhcGluZyBjb21wbGV0ZWQgd2l0aCBlcnJvcnMnXG4gICAgfSBhcyBBcGlSZXNwb25zZTxTY3JhcGVSZXNwb25zZT4pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIG1hbnVhbCBzY3JhcGluZzonLCBlcnJvcik7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gY29tcGxldGUgc2NyYXBpbmcgcHJvY2VzcycsXG4gICAgICBtZXNzYWdlOiBTdHJpbmcoZXJyb3IpXG4gICAgfSBhcyBBcGlSZXNwb25zZTxudWxsPiwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgIGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkLiBVc2UgUE9TVCB0byB0cmlnZ2VyIHNjcmFwaW5nLidcbiAgfSwgeyBzdGF0dXM6IDQwNSB9KTtcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiVkxSU2NyYXBlciIsIlBPU1QiLCJjb25zb2xlIiwibG9nIiwic2NyYXBlciIsInJlc3VsdCIsInNjcmFwZUFsbE1hdGNoZXMiLCJqc29uIiwic3VjY2VzcyIsImRhdGEiLCJtZXNzYWdlIiwibWF0Y2hlc19zY3JhcGVkIiwibWF0Y2hlc191cGRhdGVkIiwiZXJyb3IiLCJTdHJpbmciLCJzdGF0dXMiLCJHRVQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/scrape/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/database.ts":
/*!*****************************!*\
  !*** ./src/lib/database.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DatabaseService: () => (/* binding */ DatabaseService),\n/* harmony export */   getDatabase: () => (/* binding */ getDatabase)\n/* harmony export */ });\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// Database instance\nlet db = null;\nfunction getDatabase() {\n    if (!db) {\n        const dbPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'vlr_matches.db');\n        db = new (better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default())(dbPath);\n        // Enable WAL mode for better performance\n        db.pragma('journal_mode = WAL');\n        // Initialize database schema\n        initializeSchema();\n    }\n    return db;\n}\nfunction initializeSchema() {\n    const db = getDatabase();\n    // Create tables\n    db.exec(`\n    CREATE TABLE IF NOT EXISTS teams (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT NOT NULL UNIQUE,\n      flag_url TEXT,\n      logo_url TEXT,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    );\n\n    CREATE TABLE IF NOT EXISTS tournaments (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT NOT NULL UNIQUE,\n      logo_url TEXT,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    );\n\n    CREATE TABLE IF NOT EXISTS matches (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      vlr_match_id TEXT NOT NULL UNIQUE,\n      team1_id INTEGER,\n      team2_id INTEGER,\n      tournament_id INTEGER,\n      status TEXT NOT NULL DEFAULT 'upcoming',\n      match_time DATETIME,\n      match_format TEXT DEFAULT 'Bo3',\n      stage TEXT,\n      team1_score INTEGER DEFAULT 0,\n      team2_score INTEGER DEFAULT 0,\n      match_url TEXT,\n      vod_url TEXT,\n      stats_url TEXT,\n      maps_data TEXT, -- JSON string\n      player_stats TEXT, -- JSON string\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n      updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (team1_id) REFERENCES teams (id),\n      FOREIGN KEY (team2_id) REFERENCES teams (id),\n      FOREIGN KEY (tournament_id) REFERENCES tournaments (id)\n    );\n\n    CREATE TABLE IF NOT EXISTS scraping_logs (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      scrape_type TEXT NOT NULL,\n      url TEXT NOT NULL,\n      status TEXT NOT NULL,\n      error_message TEXT,\n      matches_found INTEGER DEFAULT 0,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    );\n\n    -- Indexes for performance\n    CREATE INDEX IF NOT EXISTS idx_matches_status ON matches(status);\n    CREATE INDEX IF NOT EXISTS idx_matches_vlr_id ON matches(vlr_match_id);\n    CREATE INDEX IF NOT EXISTS idx_matches_time ON matches(match_time);\n    CREATE INDEX IF NOT EXISTS idx_scraping_logs_created ON scraping_logs(created_at);\n  `);\n}\nclass DatabaseService {\n    constructor(){\n        this.db = getDatabase();\n    }\n    // Team operations\n    getOrCreateTeam(name, flagUrl, logoUrl) {\n        if (!name || name.toLowerCase() === 'tbd' || name === 'â€“' || name === '-') {\n            throw new Error('Invalid team name');\n        }\n        // Try to find existing team\n        const existing = this.db.prepare('SELECT * FROM teams WHERE name = ?').get(name);\n        if (existing) {\n            return existing;\n        }\n        // Create new team\n        const result = this.db.prepare(`\n      INSERT INTO teams (name, flag_url, logo_url)\n      VALUES (?, ?, ?)\n    `).run(name, flagUrl, logoUrl);\n        return {\n            id: result.lastInsertRowid,\n            name,\n            flag_url: flagUrl,\n            logo_url: logoUrl,\n            created_at: new Date().toISOString()\n        };\n    }\n    // Tournament operations\n    getOrCreateTournament(name, logoUrl) {\n        if (!name) {\n            throw new Error('Invalid tournament name');\n        }\n        // Try to find existing tournament\n        const existing = this.db.prepare('SELECT * FROM tournaments WHERE name = ?').get(name);\n        if (existing) {\n            return existing;\n        }\n        // Create new tournament\n        const result = this.db.prepare(`\n      INSERT INTO tournaments (name, logo_url)\n      VALUES (?, ?)\n    `).run(name, logoUrl);\n        return {\n            id: result.lastInsertRowid,\n            name,\n            logo_url: logoUrl,\n            created_at: new Date().toISOString()\n        };\n    }\n    // Match operations\n    saveMatch(matchData) {\n        const transaction = this.db.transaction(()=>{\n            // Get or create teams and tournament\n            let team1;\n            let team2;\n            let tournament;\n            if (matchData.team1_name) {\n                team1 = this.getOrCreateTeam(matchData.team1_name);\n            }\n            if (matchData.team2_name) {\n                team2 = this.getOrCreateTeam(matchData.team2_name);\n            }\n            if (matchData.tournament_name) {\n                tournament = this.getOrCreateTournament(matchData.tournament_name);\n            }\n            // Check if match exists\n            const existing = this.db.prepare('SELECT * FROM matches WHERE vlr_match_id = ?').get(matchData.vlr_match_id);\n            const now = new Date().toISOString();\n            if (existing) {\n                // Update existing match\n                this.db.prepare(`\n          UPDATE matches SET\n            team1_id = ?,\n            team2_id = ?,\n            tournament_id = ?,\n            status = ?,\n            match_time = ?,\n            match_format = ?,\n            stage = ?,\n            team1_score = ?,\n            team2_score = ?,\n            match_url = ?,\n            vod_url = ?,\n            stats_url = ?,\n            maps_data = ?,\n            player_stats = ?,\n            updated_at = ?\n          WHERE vlr_match_id = ?\n        `).run(team1?.id, team2?.id, tournament?.id, matchData.status, matchData.match_time, matchData.match_format, matchData.stage, matchData.team1_score, matchData.team2_score, matchData.match_url, matchData.vod_url, matchData.stats_url, matchData.maps_data ? JSON.stringify(matchData.maps_data) : null, matchData.player_stats ? JSON.stringify(matchData.player_stats) : null, now, matchData.vlr_match_id);\n                return {\n                    ...existing,\n                    updated_at: now\n                };\n            } else {\n                // Create new match\n                const result = this.db.prepare(`\n          INSERT INTO matches (\n            vlr_match_id, team1_id, team2_id, tournament_id, status,\n            match_time, match_format, stage, team1_score, team2_score,\n            match_url, vod_url, stats_url, maps_data, player_stats\n          ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n        `).run(matchData.vlr_match_id, team1?.id, team2?.id, tournament?.id, matchData.status, matchData.match_time, matchData.match_format, matchData.stage, matchData.team1_score, matchData.team2_score, matchData.match_url, matchData.vod_url, matchData.stats_url, matchData.maps_data ? JSON.stringify(matchData.maps_data) : null, matchData.player_stats ? JSON.stringify(matchData.player_stats) : null);\n                return {\n                    id: result.lastInsertRowid,\n                    vlr_match_id: matchData.vlr_match_id,\n                    team1_id: team1?.id,\n                    team2_id: team2?.id,\n                    tournament_id: tournament?.id,\n                    status: matchData.status,\n                    match_time: matchData.match_time,\n                    match_format: matchData.match_format,\n                    stage: matchData.stage,\n                    team1_score: matchData.team1_score,\n                    team2_score: matchData.team2_score,\n                    match_url: matchData.match_url,\n                    vod_url: matchData.vod_url,\n                    stats_url: matchData.stats_url,\n                    maps_data: matchData.maps_data,\n                    player_stats: matchData.player_stats,\n                    created_at: now,\n                    updated_at: now\n                };\n            }\n        });\n        return transaction();\n    }\n    // Get matches with filtering\n    getMatches(status, limit = 50, offset = 0) {\n        let query = `\n      SELECT \n        m.*,\n        t1.name as team1_name, t1.flag_url as team1_flag,\n        t2.name as team2_name, t2.flag_url as team2_flag,\n        tour.name as tournament_name, tour.logo_url as tournament_logo\n      FROM matches m\n      LEFT JOIN teams t1 ON m.team1_id = t1.id\n      LEFT JOIN teams t2 ON m.team2_id = t2.id\n      LEFT JOIN tournaments tour ON m.tournament_id = tour.id\n    `;\n        const params = [];\n        if (status && status !== 'all') {\n            query += ' WHERE m.status = ?';\n            params.push(status);\n        }\n        // Get total count\n        let countQuery = 'SELECT COUNT(*) as count FROM matches m';\n        if (status && status !== 'all') {\n            countQuery += ' WHERE status = ?';\n        }\n        const totalResult = this.db.prepare(countQuery).get(status && status !== 'all' ? [\n            status\n        ] : []);\n        // Add ordering and pagination\n        query += ' ORDER BY m.created_at DESC LIMIT ? OFFSET ?';\n        params.push(limit, offset);\n        const rows = this.db.prepare(query).all(params);\n        const matches = rows.map((row)=>({\n                id: row.id,\n                vlr_match_id: row.vlr_match_id,\n                team1_id: row.team1_id,\n                team2_id: row.team2_id,\n                tournament_id: row.tournament_id,\n                status: row.status,\n                match_time: row.match_time,\n                match_format: row.match_format,\n                stage: row.stage,\n                team1_score: row.team1_score,\n                team2_score: row.team2_score,\n                match_url: row.match_url,\n                vod_url: row.vod_url,\n                stats_url: row.stats_url,\n                maps_data: row.maps_data ? JSON.parse(row.maps_data) : undefined,\n                player_stats: row.player_stats ? JSON.parse(row.player_stats) : undefined,\n                created_at: row.created_at,\n                updated_at: row.updated_at,\n                team1: row.team1_name ? {\n                    id: row.team1_id,\n                    name: row.team1_name,\n                    flag_url: row.team1_flag,\n                    created_at: ''\n                } : undefined,\n                team2: row.team2_name ? {\n                    id: row.team2_id,\n                    name: row.team2_name,\n                    flag_url: row.team2_flag,\n                    created_at: ''\n                } : undefined,\n                tournament: row.tournament_name ? {\n                    id: row.tournament_id,\n                    name: row.tournament_name,\n                    logo_url: row.tournament_logo,\n                    created_at: ''\n                } : undefined\n            }));\n        return {\n            matches,\n            total: totalResult.count\n        };\n    }\n    // Get single match by ID\n    getMatch(id) {\n        const row = this.db.prepare(`\n      SELECT \n        m.*,\n        t1.name as team1_name, t1.flag_url as team1_flag,\n        t2.name as team2_name, t2.flag_url as team2_flag,\n        tour.name as tournament_name, tour.logo_url as tournament_logo\n      FROM matches m\n      LEFT JOIN teams t1 ON m.team1_id = t1.id\n      LEFT JOIN teams t2 ON m.team2_id = t2.id\n      LEFT JOIN tournaments tour ON m.tournament_id = tour.id\n      WHERE m.id = ?\n    `).get(id);\n        if (!row) return null;\n        return {\n            id: row.id,\n            vlr_match_id: row.vlr_match_id,\n            team1_id: row.team1_id,\n            team2_id: row.team2_id,\n            tournament_id: row.tournament_id,\n            status: row.status,\n            match_time: row.match_time,\n            match_format: row.match_format,\n            stage: row.stage,\n            team1_score: row.team1_score,\n            team2_score: row.team2_score,\n            match_url: row.match_url,\n            vod_url: row.vod_url,\n            stats_url: row.stats_url,\n            maps_data: row.maps_data ? JSON.parse(row.maps_data) : undefined,\n            player_stats: row.player_stats ? JSON.parse(row.player_stats) : undefined,\n            created_at: row.created_at,\n            updated_at: row.updated_at,\n            team1: row.team1_name ? {\n                id: row.team1_id,\n                name: row.team1_name,\n                flag_url: row.team1_flag,\n                created_at: ''\n            } : undefined,\n            team2: row.team2_name ? {\n                id: row.team2_id,\n                name: row.team2_name,\n                flag_url: row.team2_flag,\n                created_at: ''\n            } : undefined,\n            tournament: row.tournament_name ? {\n                id: row.tournament_id,\n                name: row.tournament_name,\n                logo_url: row.tournament_logo,\n                created_at: ''\n            } : undefined\n        };\n    }\n    // Get all teams\n    getTeams() {\n        return this.db.prepare('SELECT * FROM teams ORDER BY name').all();\n    }\n    // Get all tournaments\n    getTournaments() {\n        return this.db.prepare('SELECT * FROM tournaments ORDER BY name').all();\n    }\n    // Log scraping activity\n    logScraping(type, url, status, errorMessage, matchesFound = 0) {\n        this.db.prepare(`\n      INSERT INTO scraping_logs (scrape_type, url, status, error_message, matches_found)\n      VALUES (?, ?, ?, ?, ?)\n    `).run(type, url, status, errorMessage, matchesFound);\n    }\n    // Get scraping logs\n    getScrapingLogs(limit = 20) {\n        return this.db.prepare(`\n      SELECT * FROM scraping_logs \n      ORDER BY created_at DESC \n      LIMIT ?\n    `).all(limit);\n    }\n    // Get database statistics\n    getStats() {\n        const matchCount = this.db.prepare('SELECT COUNT(*) as count FROM matches').get();\n        const liveCount = this.db.prepare('SELECT COUNT(*) as count FROM matches WHERE status = \"live\"').get();\n        const upcomingCount = this.db.prepare('SELECT COUNT(*) as count FROM matches WHERE status = \"upcoming\"').get();\n        const completedCount = this.db.prepare('SELECT COUNT(*) as count FROM matches WHERE status = \"completed\"').get();\n        const teamCount = this.db.prepare('SELECT COUNT(*) as count FROM teams').get();\n        const tournamentCount = this.db.prepare('SELECT COUNT(*) as count FROM tournaments').get();\n        return {\n            total_matches: matchCount.count,\n            live_matches: liveCount.count,\n            upcoming_matches: upcomingCount.count,\n            completed_matches: completedCount.count,\n            total_teams: teamCount.count,\n            total_tournaments: tournamentCount.count\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d29ya3NwYWNlL3NyYy9saWIvZGF0YWJhc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERhdGFiYXNlIGZyb20gJ2JldHRlci1zcWxpdGUzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgVGVhbSwgVG91cm5hbWVudCwgTWF0Y2gsIFNjcmFwaW5nTG9nLCBNYXRjaERldGFpbFNjcmFwZURhdGEgfSBmcm9tICdAL3R5cGVzJztcblxuLy8gRGF0YWJhc2UgaW5zdGFuY2VcbmxldCBkYjogRGF0YWJhc2UuRGF0YWJhc2UgfCBudWxsID0gbnVsbDtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFiYXNlKCk6IERhdGFiYXNlLkRhdGFiYXNlIHtcbiAgaWYgKCFkYikge1xuICAgIGNvbnN0IGRiUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAndmxyX21hdGNoZXMuZGInKTtcbiAgICBkYiA9IG5ldyBEYXRhYmFzZShkYlBhdGgpO1xuICAgIFxuICAgIC8vIEVuYWJsZSBXQUwgbW9kZSBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgZGIucHJhZ21hKCdqb3VybmFsX21vZGUgPSBXQUwnKTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGRhdGFiYXNlIHNjaGVtYVxuICAgIGluaXRpYWxpemVTY2hlbWEoKTtcbiAgfVxuICByZXR1cm4gZGI7XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVTY2hlbWEoKSB7XG4gIGNvbnN0IGRiID0gZ2V0RGF0YWJhc2UoKTtcbiAgXG4gIC8vIENyZWF0ZSB0YWJsZXNcbiAgZGIuZXhlYyhgXG4gICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdGVhbXMgKFxuICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgbmFtZSBURVhUIE5PVCBOVUxMIFVOSVFVRSxcbiAgICAgIGZsYWdfdXJsIFRFWFQsXG4gICAgICBsb2dvX3VybCBURVhULFxuICAgICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgKTtcblxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHRvdXJuYW1lbnRzIChcbiAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgIG5hbWUgVEVYVCBOT1QgTlVMTCBVTklRVUUsXG4gICAgICBsb2dvX3VybCBURVhULFxuICAgICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgKTtcblxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG1hdGNoZXMgKFxuICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgdmxyX21hdGNoX2lkIFRFWFQgTk9UIE5VTEwgVU5JUVVFLFxuICAgICAgdGVhbTFfaWQgSU5URUdFUixcbiAgICAgIHRlYW0yX2lkIElOVEVHRVIsXG4gICAgICB0b3VybmFtZW50X2lkIElOVEVHRVIsXG4gICAgICBzdGF0dXMgVEVYVCBOT1QgTlVMTCBERUZBVUxUICd1cGNvbWluZycsXG4gICAgICBtYXRjaF90aW1lIERBVEVUSU1FLFxuICAgICAgbWF0Y2hfZm9ybWF0IFRFWFQgREVGQVVMVCAnQm8zJyxcbiAgICAgIHN0YWdlIFRFWFQsXG4gICAgICB0ZWFtMV9zY29yZSBJTlRFR0VSIERFRkFVTFQgMCxcbiAgICAgIHRlYW0yX3Njb3JlIElOVEVHRVIgREVGQVVMVCAwLFxuICAgICAgbWF0Y2hfdXJsIFRFWFQsXG4gICAgICB2b2RfdXJsIFRFWFQsXG4gICAgICBzdGF0c191cmwgVEVYVCxcbiAgICAgIG1hcHNfZGF0YSBURVhULCAtLSBKU09OIHN0cmluZ1xuICAgICAgcGxheWVyX3N0YXRzIFRFWFQsIC0tIEpTT04gc3RyaW5nXG4gICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICB1cGRhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICBGT1JFSUdOIEtFWSAodGVhbTFfaWQpIFJFRkVSRU5DRVMgdGVhbXMgKGlkKSxcbiAgICAgIEZPUkVJR04gS0VZICh0ZWFtMl9pZCkgUkVGRVJFTkNFUyB0ZWFtcyAoaWQpLFxuICAgICAgRk9SRUlHTiBLRVkgKHRvdXJuYW1lbnRfaWQpIFJFRkVSRU5DRVMgdG91cm5hbWVudHMgKGlkKVxuICAgICk7XG5cbiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBzY3JhcGluZ19sb2dzIChcbiAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgIHNjcmFwZV90eXBlIFRFWFQgTk9UIE5VTEwsXG4gICAgICB1cmwgVEVYVCBOT1QgTlVMTCxcbiAgICAgIHN0YXR1cyBURVhUIE5PVCBOVUxMLFxuICAgICAgZXJyb3JfbWVzc2FnZSBURVhULFxuICAgICAgbWF0Y2hlc19mb3VuZCBJTlRFR0VSIERFRkFVTFQgMCxcbiAgICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuICAgICk7XG5cbiAgICAtLSBJbmRleGVzIGZvciBwZXJmb3JtYW5jZVxuICAgIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9tYXRjaGVzX3N0YXR1cyBPTiBtYXRjaGVzKHN0YXR1cyk7XG4gICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X21hdGNoZXNfdmxyX2lkIE9OIG1hdGNoZXModmxyX21hdGNoX2lkKTtcbiAgICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfbWF0Y2hlc190aW1lIE9OIG1hdGNoZXMobWF0Y2hfdGltZSk7XG4gICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X3NjcmFwaW5nX2xvZ3NfY3JlYXRlZCBPTiBzY3JhcGluZ19sb2dzKGNyZWF0ZWRfYXQpO1xuICBgKTtcbn1cblxuZXhwb3J0IGNsYXNzIERhdGFiYXNlU2VydmljZSB7XG4gIHByaXZhdGUgZGI6IERhdGFiYXNlLkRhdGFiYXNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZGIgPSBnZXREYXRhYmFzZSgpO1xuICB9XG5cbiAgLy8gVGVhbSBvcGVyYXRpb25zXG4gIGdldE9yQ3JlYXRlVGVhbShuYW1lOiBzdHJpbmcsIGZsYWdVcmw/OiBzdHJpbmcsIGxvZ29Vcmw/OiBzdHJpbmcpOiBUZWFtIHtcbiAgICBpZiAoIW5hbWUgfHwgbmFtZS50b0xvd2VyQ2FzZSgpID09PSAndGJkJyB8fCBuYW1lID09PSAn4oCTJyB8fCBuYW1lID09PSAnLScpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0ZWFtIG5hbWUnKTtcbiAgICB9XG5cbiAgICAvLyBUcnkgdG8gZmluZCBleGlzdGluZyB0ZWFtXG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmRiLnByZXBhcmUoJ1NFTEVDVCAqIEZST00gdGVhbXMgV0hFUkUgbmFtZSA9ID8nKS5nZXQobmFtZSkgYXMgVGVhbSB8IHVuZGVmaW5lZDtcbiAgICBcbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIHJldHVybiBleGlzdGluZztcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgbmV3IHRlYW1cbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmRiLnByZXBhcmUoYFxuICAgICAgSU5TRVJUIElOVE8gdGVhbXMgKG5hbWUsIGZsYWdfdXJsLCBsb2dvX3VybClcbiAgICAgIFZBTFVFUyAoPywgPywgPylcbiAgICBgKS5ydW4obmFtZSwgZmxhZ1VybCwgbG9nb1VybCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHJlc3VsdC5sYXN0SW5zZXJ0Um93aWQgYXMgbnVtYmVyLFxuICAgICAgbmFtZSxcbiAgICAgIGZsYWdfdXJsOiBmbGFnVXJsLFxuICAgICAgbG9nb191cmw6IGxvZ29VcmwsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICB9XG5cbiAgLy8gVG91cm5hbWVudCBvcGVyYXRpb25zXG4gIGdldE9yQ3JlYXRlVG91cm5hbWVudChuYW1lOiBzdHJpbmcsIGxvZ29Vcmw/OiBzdHJpbmcpOiBUb3VybmFtZW50IHtcbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0b3VybmFtZW50IG5hbWUnKTtcbiAgICB9XG5cbiAgICAvLyBUcnkgdG8gZmluZCBleGlzdGluZyB0b3VybmFtZW50XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmRiLnByZXBhcmUoJ1NFTEVDVCAqIEZST00gdG91cm5hbWVudHMgV0hFUkUgbmFtZSA9ID8nKS5nZXQobmFtZSkgYXMgVG91cm5hbWVudCB8IHVuZGVmaW5lZDtcbiAgICBcbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIHJldHVybiBleGlzdGluZztcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgbmV3IHRvdXJuYW1lbnRcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmRiLnByZXBhcmUoYFxuICAgICAgSU5TRVJUIElOVE8gdG91cm5hbWVudHMgKG5hbWUsIGxvZ29fdXJsKVxuICAgICAgVkFMVUVTICg/LCA/KVxuICAgIGApLnJ1bihuYW1lLCBsb2dvVXJsKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogcmVzdWx0Lmxhc3RJbnNlcnRSb3dpZCBhcyBudW1iZXIsXG4gICAgICBuYW1lLFxuICAgICAgbG9nb191cmw6IGxvZ29VcmwsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICB9XG5cbiAgLy8gTWF0Y2ggb3BlcmF0aW9uc1xuICBzYXZlTWF0Y2gobWF0Y2hEYXRhOiBNYXRjaERldGFpbFNjcmFwZURhdGEpOiBNYXRjaCB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLmRiLnRyYW5zYWN0aW9uKCgpID0+IHtcbiAgICAgIC8vIEdldCBvciBjcmVhdGUgdGVhbXMgYW5kIHRvdXJuYW1lbnRcbiAgICAgIGxldCB0ZWFtMTogVGVhbSB8IHVuZGVmaW5lZDtcbiAgICAgIGxldCB0ZWFtMjogVGVhbSB8IHVuZGVmaW5lZDtcbiAgICAgIGxldCB0b3VybmFtZW50OiBUb3VybmFtZW50IHwgdW5kZWZpbmVkO1xuXG4gICAgICBpZiAobWF0Y2hEYXRhLnRlYW0xX25hbWUpIHtcbiAgICAgICAgdGVhbTEgPSB0aGlzLmdldE9yQ3JlYXRlVGVhbShtYXRjaERhdGEudGVhbTFfbmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAobWF0Y2hEYXRhLnRlYW0yX25hbWUpIHtcbiAgICAgICAgdGVhbTIgPSB0aGlzLmdldE9yQ3JlYXRlVGVhbShtYXRjaERhdGEudGVhbTJfbmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAobWF0Y2hEYXRhLnRvdXJuYW1lbnRfbmFtZSkge1xuICAgICAgICB0b3VybmFtZW50ID0gdGhpcy5nZXRPckNyZWF0ZVRvdXJuYW1lbnQobWF0Y2hEYXRhLnRvdXJuYW1lbnRfbmFtZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIG1hdGNoIGV4aXN0c1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmRiLnByZXBhcmUoJ1NFTEVDVCAqIEZST00gbWF0Y2hlcyBXSEVSRSB2bHJfbWF0Y2hfaWQgPSA/JykuZ2V0KG1hdGNoRGF0YS52bHJfbWF0Y2hfaWQpIGFzIE1hdGNoIHwgdW5kZWZpbmVkO1xuXG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgbWF0Y2hcbiAgICAgICAgdGhpcy5kYi5wcmVwYXJlKGBcbiAgICAgICAgICBVUERBVEUgbWF0Y2hlcyBTRVRcbiAgICAgICAgICAgIHRlYW0xX2lkID0gPyxcbiAgICAgICAgICAgIHRlYW0yX2lkID0gPyxcbiAgICAgICAgICAgIHRvdXJuYW1lbnRfaWQgPSA/LFxuICAgICAgICAgICAgc3RhdHVzID0gPyxcbiAgICAgICAgICAgIG1hdGNoX3RpbWUgPSA/LFxuICAgICAgICAgICAgbWF0Y2hfZm9ybWF0ID0gPyxcbiAgICAgICAgICAgIHN0YWdlID0gPyxcbiAgICAgICAgICAgIHRlYW0xX3Njb3JlID0gPyxcbiAgICAgICAgICAgIHRlYW0yX3Njb3JlID0gPyxcbiAgICAgICAgICAgIG1hdGNoX3VybCA9ID8sXG4gICAgICAgICAgICB2b2RfdXJsID0gPyxcbiAgICAgICAgICAgIHN0YXRzX3VybCA9ID8sXG4gICAgICAgICAgICBtYXBzX2RhdGEgPSA/LFxuICAgICAgICAgICAgcGxheWVyX3N0YXRzID0gPyxcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQgPSA/XG4gICAgICAgICAgV0hFUkUgdmxyX21hdGNoX2lkID0gP1xuICAgICAgICBgKS5ydW4oXG4gICAgICAgICAgdGVhbTE/LmlkLFxuICAgICAgICAgIHRlYW0yPy5pZCxcbiAgICAgICAgICB0b3VybmFtZW50Py5pZCxcbiAgICAgICAgICBtYXRjaERhdGEuc3RhdHVzLFxuICAgICAgICAgIG1hdGNoRGF0YS5tYXRjaF90aW1lLFxuICAgICAgICAgIG1hdGNoRGF0YS5tYXRjaF9mb3JtYXQsXG4gICAgICAgICAgbWF0Y2hEYXRhLnN0YWdlLFxuICAgICAgICAgIG1hdGNoRGF0YS50ZWFtMV9zY29yZSxcbiAgICAgICAgICBtYXRjaERhdGEudGVhbTJfc2NvcmUsXG4gICAgICAgICAgbWF0Y2hEYXRhLm1hdGNoX3VybCxcbiAgICAgICAgICBtYXRjaERhdGEudm9kX3VybCxcbiAgICAgICAgICBtYXRjaERhdGEuc3RhdHNfdXJsLFxuICAgICAgICAgIG1hdGNoRGF0YS5tYXBzX2RhdGEgPyBKU09OLnN0cmluZ2lmeShtYXRjaERhdGEubWFwc19kYXRhKSA6IG51bGwsXG4gICAgICAgICAgbWF0Y2hEYXRhLnBsYXllcl9zdGF0cyA/IEpTT04uc3RyaW5naWZ5KG1hdGNoRGF0YS5wbGF5ZXJfc3RhdHMpIDogbnVsbCxcbiAgICAgICAgICBub3csXG4gICAgICAgICAgbWF0Y2hEYXRhLnZscl9tYXRjaF9pZFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB7IC4uLmV4aXN0aW5nLCB1cGRhdGVkX2F0OiBub3cgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENyZWF0ZSBuZXcgbWF0Y2hcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5kYi5wcmVwYXJlKGBcbiAgICAgICAgICBJTlNFUlQgSU5UTyBtYXRjaGVzIChcbiAgICAgICAgICAgIHZscl9tYXRjaF9pZCwgdGVhbTFfaWQsIHRlYW0yX2lkLCB0b3VybmFtZW50X2lkLCBzdGF0dXMsXG4gICAgICAgICAgICBtYXRjaF90aW1lLCBtYXRjaF9mb3JtYXQsIHN0YWdlLCB0ZWFtMV9zY29yZSwgdGVhbTJfc2NvcmUsXG4gICAgICAgICAgICBtYXRjaF91cmwsIHZvZF91cmwsIHN0YXRzX3VybCwgbWFwc19kYXRhLCBwbGF5ZXJfc3RhdHNcbiAgICAgICAgICApIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPylcbiAgICAgICAgYCkucnVuKFxuICAgICAgICAgIG1hdGNoRGF0YS52bHJfbWF0Y2hfaWQsXG4gICAgICAgICAgdGVhbTE/LmlkLFxuICAgICAgICAgIHRlYW0yPy5pZCxcbiAgICAgICAgICB0b3VybmFtZW50Py5pZCxcbiAgICAgICAgICBtYXRjaERhdGEuc3RhdHVzLFxuICAgICAgICAgIG1hdGNoRGF0YS5tYXRjaF90aW1lLFxuICAgICAgICAgIG1hdGNoRGF0YS5tYXRjaF9mb3JtYXQsXG4gICAgICAgICAgbWF0Y2hEYXRhLnN0YWdlLFxuICAgICAgICAgIG1hdGNoRGF0YS50ZWFtMV9zY29yZSxcbiAgICAgICAgICBtYXRjaERhdGEudGVhbTJfc2NvcmUsXG4gICAgICAgICAgbWF0Y2hEYXRhLm1hdGNoX3VybCxcbiAgICAgICAgICBtYXRjaERhdGEudm9kX3VybCxcbiAgICAgICAgICBtYXRjaERhdGEuc3RhdHNfdXJsLFxuICAgICAgICAgIG1hdGNoRGF0YS5tYXBzX2RhdGEgPyBKU09OLnN0cmluZ2lmeShtYXRjaERhdGEubWFwc19kYXRhKSA6IG51bGwsXG4gICAgICAgICAgbWF0Y2hEYXRhLnBsYXllcl9zdGF0cyA/IEpTT04uc3RyaW5naWZ5KG1hdGNoRGF0YS5wbGF5ZXJfc3RhdHMpIDogbnVsbFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IHJlc3VsdC5sYXN0SW5zZXJ0Um93aWQgYXMgbnVtYmVyLFxuICAgICAgICAgIHZscl9tYXRjaF9pZDogbWF0Y2hEYXRhLnZscl9tYXRjaF9pZCxcbiAgICAgICAgICB0ZWFtMV9pZDogdGVhbTE/LmlkLFxuICAgICAgICAgIHRlYW0yX2lkOiB0ZWFtMj8uaWQsXG4gICAgICAgICAgdG91cm5hbWVudF9pZDogdG91cm5hbWVudD8uaWQsXG4gICAgICAgICAgc3RhdHVzOiBtYXRjaERhdGEuc3RhdHVzLFxuICAgICAgICAgIG1hdGNoX3RpbWU6IG1hdGNoRGF0YS5tYXRjaF90aW1lLFxuICAgICAgICAgIG1hdGNoX2Zvcm1hdDogbWF0Y2hEYXRhLm1hdGNoX2Zvcm1hdCxcbiAgICAgICAgICBzdGFnZTogbWF0Y2hEYXRhLnN0YWdlLFxuICAgICAgICAgIHRlYW0xX3Njb3JlOiBtYXRjaERhdGEudGVhbTFfc2NvcmUsXG4gICAgICAgICAgdGVhbTJfc2NvcmU6IG1hdGNoRGF0YS50ZWFtMl9zY29yZSxcbiAgICAgICAgICBtYXRjaF91cmw6IG1hdGNoRGF0YS5tYXRjaF91cmwsXG4gICAgICAgICAgdm9kX3VybDogbWF0Y2hEYXRhLnZvZF91cmwsXG4gICAgICAgICAgc3RhdHNfdXJsOiBtYXRjaERhdGEuc3RhdHNfdXJsLFxuICAgICAgICAgIG1hcHNfZGF0YTogbWF0Y2hEYXRhLm1hcHNfZGF0YSxcbiAgICAgICAgICBwbGF5ZXJfc3RhdHM6IG1hdGNoRGF0YS5wbGF5ZXJfc3RhdHMsXG4gICAgICAgICAgY3JlYXRlZF9hdDogbm93LFxuICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5vd1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uKCk7XG4gIH1cblxuICAvLyBHZXQgbWF0Y2hlcyB3aXRoIGZpbHRlcmluZ1xuICBnZXRNYXRjaGVzKHN0YXR1cz86IHN0cmluZywgbGltaXQgPSA1MCwgb2Zmc2V0ID0gMCk6IHsgbWF0Y2hlczogTWF0Y2hbXTsgdG90YWw6IG51bWJlciB9IHtcbiAgICBsZXQgcXVlcnkgPSBgXG4gICAgICBTRUxFQ1QgXG4gICAgICAgIG0uKixcbiAgICAgICAgdDEubmFtZSBhcyB0ZWFtMV9uYW1lLCB0MS5mbGFnX3VybCBhcyB0ZWFtMV9mbGFnLFxuICAgICAgICB0Mi5uYW1lIGFzIHRlYW0yX25hbWUsIHQyLmZsYWdfdXJsIGFzIHRlYW0yX2ZsYWcsXG4gICAgICAgIHRvdXIubmFtZSBhcyB0b3VybmFtZW50X25hbWUsIHRvdXIubG9nb191cmwgYXMgdG91cm5hbWVudF9sb2dvXG4gICAgICBGUk9NIG1hdGNoZXMgbVxuICAgICAgTEVGVCBKT0lOIHRlYW1zIHQxIE9OIG0udGVhbTFfaWQgPSB0MS5pZFxuICAgICAgTEVGVCBKT0lOIHRlYW1zIHQyIE9OIG0udGVhbTJfaWQgPSB0Mi5pZFxuICAgICAgTEVGVCBKT0lOIHRvdXJuYW1lbnRzIHRvdXIgT04gbS50b3VybmFtZW50X2lkID0gdG91ci5pZFxuICAgIGA7XG5cbiAgICBjb25zdCBwYXJhbXM6IGFueVtdID0gW107XG5cbiAgICBpZiAoc3RhdHVzICYmIHN0YXR1cyAhPT0gJ2FsbCcpIHtcbiAgICAgIHF1ZXJ5ICs9ICcgV0hFUkUgbS5zdGF0dXMgPSA/JztcbiAgICAgIHBhcmFtcy5wdXNoKHN0YXR1cyk7XG4gICAgfVxuXG4gICAgLy8gR2V0IHRvdGFsIGNvdW50XG4gICAgbGV0IGNvdW50UXVlcnkgPSAnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gbWF0Y2hlcyBtJztcbiAgICBpZiAoc3RhdHVzICYmIHN0YXR1cyAhPT0gJ2FsbCcpIHtcbiAgICAgIGNvdW50UXVlcnkgKz0gJyBXSEVSRSBzdGF0dXMgPSA/JztcbiAgICB9XG4gICAgY29uc3QgdG90YWxSZXN1bHQgPSB0aGlzLmRiLnByZXBhcmUoY291bnRRdWVyeSkuZ2V0KHN0YXR1cyAmJiBzdGF0dXMgIT09ICdhbGwnID8gW3N0YXR1c10gOiBbXSkgYXMgeyBjb3VudDogbnVtYmVyIH07XG5cbiAgICAvLyBBZGQgb3JkZXJpbmcgYW5kIHBhZ2luYXRpb25cbiAgICBxdWVyeSArPSAnIE9SREVSIEJZIG0uY3JlYXRlZF9hdCBERVNDIExJTUlUID8gT0ZGU0VUID8nO1xuICAgIHBhcmFtcy5wdXNoKGxpbWl0LCBvZmZzZXQpO1xuXG4gICAgY29uc3Qgcm93cyA9IHRoaXMuZGIucHJlcGFyZShxdWVyeSkuYWxsKHBhcmFtcykgYXMgYW55W107XG5cbiAgICBjb25zdCBtYXRjaGVzOiBNYXRjaFtdID0gcm93cy5tYXAocm93ID0+ICh7XG4gICAgICBpZDogcm93LmlkLFxuICAgICAgdmxyX21hdGNoX2lkOiByb3cudmxyX21hdGNoX2lkLFxuICAgICAgdGVhbTFfaWQ6IHJvdy50ZWFtMV9pZCxcbiAgICAgIHRlYW0yX2lkOiByb3cudGVhbTJfaWQsXG4gICAgICB0b3VybmFtZW50X2lkOiByb3cudG91cm5hbWVudF9pZCxcbiAgICAgIHN0YXR1czogcm93LnN0YXR1cyxcbiAgICAgIG1hdGNoX3RpbWU6IHJvdy5tYXRjaF90aW1lLFxuICAgICAgbWF0Y2hfZm9ybWF0OiByb3cubWF0Y2hfZm9ybWF0LFxuICAgICAgc3RhZ2U6IHJvdy5zdGFnZSxcbiAgICAgIHRlYW0xX3Njb3JlOiByb3cudGVhbTFfc2NvcmUsXG4gICAgICB0ZWFtMl9zY29yZTogcm93LnRlYW0yX3Njb3JlLFxuICAgICAgbWF0Y2hfdXJsOiByb3cubWF0Y2hfdXJsLFxuICAgICAgdm9kX3VybDogcm93LnZvZF91cmwsXG4gICAgICBzdGF0c191cmw6IHJvdy5zdGF0c191cmwsXG4gICAgICBtYXBzX2RhdGE6IHJvdy5tYXBzX2RhdGEgPyBKU09OLnBhcnNlKHJvdy5tYXBzX2RhdGEpIDogdW5kZWZpbmVkLFxuICAgICAgcGxheWVyX3N0YXRzOiByb3cucGxheWVyX3N0YXRzID8gSlNPTi5wYXJzZShyb3cucGxheWVyX3N0YXRzKSA6IHVuZGVmaW5lZCxcbiAgICAgIGNyZWF0ZWRfYXQ6IHJvdy5jcmVhdGVkX2F0LFxuICAgICAgdXBkYXRlZF9hdDogcm93LnVwZGF0ZWRfYXQsXG4gICAgICB0ZWFtMTogcm93LnRlYW0xX25hbWUgPyB7IGlkOiByb3cudGVhbTFfaWQsIG5hbWU6IHJvdy50ZWFtMV9uYW1lLCBmbGFnX3VybDogcm93LnRlYW0xX2ZsYWcsIGNyZWF0ZWRfYXQ6ICcnIH0gOiB1bmRlZmluZWQsXG4gICAgICB0ZWFtMjogcm93LnRlYW0yX25hbWUgPyB7IGlkOiByb3cudGVhbTJfaWQsIG5hbWU6IHJvdy50ZWFtMl9uYW1lLCBmbGFnX3VybDogcm93LnRlYW0yX2ZsYWcsIGNyZWF0ZWRfYXQ6ICcnIH0gOiB1bmRlZmluZWQsXG4gICAgICB0b3VybmFtZW50OiByb3cudG91cm5hbWVudF9uYW1lID8geyBpZDogcm93LnRvdXJuYW1lbnRfaWQsIG5hbWU6IHJvdy50b3VybmFtZW50X25hbWUsIGxvZ29fdXJsOiByb3cudG91cm5hbWVudF9sb2dvLCBjcmVhdGVkX2F0OiAnJyB9IDogdW5kZWZpbmVkXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG1hdGNoZXMsXG4gICAgICB0b3RhbDogdG90YWxSZXN1bHQuY291bnRcbiAgICB9O1xuICB9XG5cbiAgLy8gR2V0IHNpbmdsZSBtYXRjaCBieSBJRFxuICBnZXRNYXRjaChpZDogbnVtYmVyKTogTWF0Y2ggfCBudWxsIHtcbiAgICBjb25zdCByb3cgPSB0aGlzLmRiLnByZXBhcmUoYFxuICAgICAgU0VMRUNUIFxuICAgICAgICBtLiosXG4gICAgICAgIHQxLm5hbWUgYXMgdGVhbTFfbmFtZSwgdDEuZmxhZ191cmwgYXMgdGVhbTFfZmxhZyxcbiAgICAgICAgdDIubmFtZSBhcyB0ZWFtMl9uYW1lLCB0Mi5mbGFnX3VybCBhcyB0ZWFtMl9mbGFnLFxuICAgICAgICB0b3VyLm5hbWUgYXMgdG91cm5hbWVudF9uYW1lLCB0b3VyLmxvZ29fdXJsIGFzIHRvdXJuYW1lbnRfbG9nb1xuICAgICAgRlJPTSBtYXRjaGVzIG1cbiAgICAgIExFRlQgSk9JTiB0ZWFtcyB0MSBPTiBtLnRlYW0xX2lkID0gdDEuaWRcbiAgICAgIExFRlQgSk9JTiB0ZWFtcyB0MiBPTiBtLnRlYW0yX2lkID0gdDIuaWRcbiAgICAgIExFRlQgSk9JTiB0b3VybmFtZW50cyB0b3VyIE9OIG0udG91cm5hbWVudF9pZCA9IHRvdXIuaWRcbiAgICAgIFdIRVJFIG0uaWQgPSA/XG4gICAgYCkuZ2V0KGlkKSBhcyBhbnk7XG5cbiAgICBpZiAoIXJvdykgcmV0dXJuIG51bGw7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHJvdy5pZCxcbiAgICAgIHZscl9tYXRjaF9pZDogcm93LnZscl9tYXRjaF9pZCxcbiAgICAgIHRlYW0xX2lkOiByb3cudGVhbTFfaWQsXG4gICAgICB0ZWFtMl9pZDogcm93LnRlYW0yX2lkLFxuICAgICAgdG91cm5hbWVudF9pZDogcm93LnRvdXJuYW1lbnRfaWQsXG4gICAgICBzdGF0dXM6IHJvdy5zdGF0dXMsXG4gICAgICBtYXRjaF90aW1lOiByb3cubWF0Y2hfdGltZSxcbiAgICAgIG1hdGNoX2Zvcm1hdDogcm93Lm1hdGNoX2Zvcm1hdCxcbiAgICAgIHN0YWdlOiByb3cuc3RhZ2UsXG4gICAgICB0ZWFtMV9zY29yZTogcm93LnRlYW0xX3Njb3JlLFxuICAgICAgdGVhbTJfc2NvcmU6IHJvdy50ZWFtMl9zY29yZSxcbiAgICAgIG1hdGNoX3VybDogcm93Lm1hdGNoX3VybCxcbiAgICAgIHZvZF91cmw6IHJvdy52b2RfdXJsLFxuICAgICAgc3RhdHNfdXJsOiByb3cuc3RhdHNfdXJsLFxuICAgICAgbWFwc19kYXRhOiByb3cubWFwc19kYXRhID8gSlNPTi5wYXJzZShyb3cubWFwc19kYXRhKSA6IHVuZGVmaW5lZCxcbiAgICAgIHBsYXllcl9zdGF0czogcm93LnBsYXllcl9zdGF0cyA/IEpTT04ucGFyc2Uocm93LnBsYXllcl9zdGF0cykgOiB1bmRlZmluZWQsXG4gICAgICBjcmVhdGVkX2F0OiByb3cuY3JlYXRlZF9hdCxcbiAgICAgIHVwZGF0ZWRfYXQ6IHJvdy51cGRhdGVkX2F0LFxuICAgICAgdGVhbTE6IHJvdy50ZWFtMV9uYW1lID8geyBpZDogcm93LnRlYW0xX2lkLCBuYW1lOiByb3cudGVhbTFfbmFtZSwgZmxhZ191cmw6IHJvdy50ZWFtMV9mbGFnLCBjcmVhdGVkX2F0OiAnJyB9IDogdW5kZWZpbmVkLFxuICAgICAgdGVhbTI6IHJvdy50ZWFtMl9uYW1lID8geyBpZDogcm93LnRlYW0yX2lkLCBuYW1lOiByb3cudGVhbTJfbmFtZSwgZmxhZ191cmw6IHJvdy50ZWFtMl9mbGFnLCBjcmVhdGVkX2F0OiAnJyB9IDogdW5kZWZpbmVkLFxuICAgICAgdG91cm5hbWVudDogcm93LnRvdXJuYW1lbnRfbmFtZSA/IHsgaWQ6IHJvdy50b3VybmFtZW50X2lkLCBuYW1lOiByb3cudG91cm5hbWVudF9uYW1lLCBsb2dvX3VybDogcm93LnRvdXJuYW1lbnRfbG9nbywgY3JlYXRlZF9hdDogJycgfSA6IHVuZGVmaW5lZFxuICAgIH07XG4gIH1cblxuICAvLyBHZXQgYWxsIHRlYW1zXG4gIGdldFRlYW1zKCk6IFRlYW1bXSB7XG4gICAgcmV0dXJuIHRoaXMuZGIucHJlcGFyZSgnU0VMRUNUICogRlJPTSB0ZWFtcyBPUkRFUiBCWSBuYW1lJykuYWxsKCkgYXMgVGVhbVtdO1xuICB9XG5cbiAgLy8gR2V0IGFsbCB0b3VybmFtZW50c1xuICBnZXRUb3VybmFtZW50cygpOiBUb3VybmFtZW50W10ge1xuICAgIHJldHVybiB0aGlzLmRiLnByZXBhcmUoJ1NFTEVDVCAqIEZST00gdG91cm5hbWVudHMgT1JERVIgQlkgbmFtZScpLmFsbCgpIGFzIFRvdXJuYW1lbnRbXTtcbiAgfVxuXG4gIC8vIExvZyBzY3JhcGluZyBhY3Rpdml0eVxuICBsb2dTY3JhcGluZyh0eXBlOiBzdHJpbmcsIHVybDogc3RyaW5nLCBzdGF0dXM6IHN0cmluZywgZXJyb3JNZXNzYWdlPzogc3RyaW5nLCBtYXRjaGVzRm91bmQgPSAwKTogdm9pZCB7XG4gICAgdGhpcy5kYi5wcmVwYXJlKGBcbiAgICAgIElOU0VSVCBJTlRPIHNjcmFwaW5nX2xvZ3MgKHNjcmFwZV90eXBlLCB1cmwsIHN0YXR1cywgZXJyb3JfbWVzc2FnZSwgbWF0Y2hlc19mb3VuZClcbiAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPylcbiAgICBgKS5ydW4odHlwZSwgdXJsLCBzdGF0dXMsIGVycm9yTWVzc2FnZSwgbWF0Y2hlc0ZvdW5kKTtcbiAgfVxuXG4gIC8vIEdldCBzY3JhcGluZyBsb2dzXG4gIGdldFNjcmFwaW5nTG9ncyhsaW1pdCA9IDIwKTogU2NyYXBpbmdMb2dbXSB7XG4gICAgcmV0dXJuIHRoaXMuZGIucHJlcGFyZShgXG4gICAgICBTRUxFQ1QgKiBGUk9NIHNjcmFwaW5nX2xvZ3MgXG4gICAgICBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0MgXG4gICAgICBMSU1JVCA/XG4gICAgYCkuYWxsKGxpbWl0KSBhcyBTY3JhcGluZ0xvZ1tdO1xuICB9XG5cbiAgLy8gR2V0IGRhdGFiYXNlIHN0YXRpc3RpY3NcbiAgZ2V0U3RhdHMoKSB7XG4gICAgY29uc3QgbWF0Y2hDb3VudCA9IHRoaXMuZGIucHJlcGFyZSgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gbWF0Y2hlcycpLmdldCgpIGFzIHsgY291bnQ6IG51bWJlciB9O1xuICAgIGNvbnN0IGxpdmVDb3VudCA9IHRoaXMuZGIucHJlcGFyZSgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gbWF0Y2hlcyBXSEVSRSBzdGF0dXMgPSBcImxpdmVcIicpLmdldCgpIGFzIHsgY291bnQ6IG51bWJlciB9O1xuICAgIGNvbnN0IHVwY29taW5nQ291bnQgPSB0aGlzLmRiLnByZXBhcmUoJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIG1hdGNoZXMgV0hFUkUgc3RhdHVzID0gXCJ1cGNvbWluZ1wiJykuZ2V0KCkgYXMgeyBjb3VudDogbnVtYmVyIH07XG4gICAgY29uc3QgY29tcGxldGVkQ291bnQgPSB0aGlzLmRiLnByZXBhcmUoJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIG1hdGNoZXMgV0hFUkUgc3RhdHVzID0gXCJjb21wbGV0ZWRcIicpLmdldCgpIGFzIHsgY291bnQ6IG51bWJlciB9O1xuICAgIGNvbnN0IHRlYW1Db3VudCA9IHRoaXMuZGIucHJlcGFyZSgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gdGVhbXMnKS5nZXQoKSBhcyB7IGNvdW50OiBudW1iZXIgfTtcbiAgICBjb25zdCB0b3VybmFtZW50Q291bnQgPSB0aGlzLmRiLnByZXBhcmUoJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIHRvdXJuYW1lbnRzJykuZ2V0KCkgYXMgeyBjb3VudDogbnVtYmVyIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxfbWF0Y2hlczogbWF0Y2hDb3VudC5jb3VudCxcbiAgICAgIGxpdmVfbWF0Y2hlczogbGl2ZUNvdW50LmNvdW50LFxuICAgICAgdXBjb21pbmdfbWF0Y2hlczogdXBjb21pbmdDb3VudC5jb3VudCxcbiAgICAgIGNvbXBsZXRlZF9tYXRjaGVzOiBjb21wbGV0ZWRDb3VudC5jb3VudCxcbiAgICAgIHRvdGFsX3RlYW1zOiB0ZWFtQ291bnQuY291bnQsXG4gICAgICB0b3RhbF90b3VybmFtZW50czogdG91cm5hbWVudENvdW50LmNvdW50XG4gICAgfTtcbiAgfVxufSJdLCJuYW1lcyI6WyJEYXRhYmFzZSIsInBhdGgiLCJkYiIsImdldERhdGFiYXNlIiwiZGJQYXRoIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJwcmFnbWEiLCJpbml0aWFsaXplU2NoZW1hIiwiZXhlYyIsIkRhdGFiYXNlU2VydmljZSIsImNvbnN0cnVjdG9yIiwiZ2V0T3JDcmVhdGVUZWFtIiwibmFtZSIsImZsYWdVcmwiLCJsb2dvVXJsIiwidG9Mb3dlckNhc2UiLCJFcnJvciIsImV4aXN0aW5nIiwicHJlcGFyZSIsImdldCIsInJlc3VsdCIsInJ1biIsImlkIiwibGFzdEluc2VydFJvd2lkIiwiZmxhZ191cmwiLCJsb2dvX3VybCIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJnZXRPckNyZWF0ZVRvdXJuYW1lbnQiLCJzYXZlTWF0Y2giLCJtYXRjaERhdGEiLCJ0cmFuc2FjdGlvbiIsInRlYW0xIiwidGVhbTIiLCJ0b3VybmFtZW50IiwidGVhbTFfbmFtZSIsInRlYW0yX25hbWUiLCJ0b3VybmFtZW50X25hbWUiLCJ2bHJfbWF0Y2hfaWQiLCJub3ciLCJzdGF0dXMiLCJtYXRjaF90aW1lIiwibWF0Y2hfZm9ybWF0Iiwic3RhZ2UiLCJ0ZWFtMV9zY29yZSIsInRlYW0yX3Njb3JlIiwibWF0Y2hfdXJsIiwidm9kX3VybCIsInN0YXRzX3VybCIsIm1hcHNfZGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwbGF5ZXJfc3RhdHMiLCJ1cGRhdGVkX2F0IiwidGVhbTFfaWQiLCJ0ZWFtMl9pZCIsInRvdXJuYW1lbnRfaWQiLCJnZXRNYXRjaGVzIiwibGltaXQiLCJvZmZzZXQiLCJxdWVyeSIsInBhcmFtcyIsInB1c2giLCJjb3VudFF1ZXJ5IiwidG90YWxSZXN1bHQiLCJyb3dzIiwiYWxsIiwibWF0Y2hlcyIsIm1hcCIsInJvdyIsInBhcnNlIiwidW5kZWZpbmVkIiwidGVhbTFfZmxhZyIsInRlYW0yX2ZsYWciLCJ0b3VybmFtZW50X2xvZ28iLCJ0b3RhbCIsImNvdW50IiwiZ2V0TWF0Y2giLCJnZXRUZWFtcyIsImdldFRvdXJuYW1lbnRzIiwibG9nU2NyYXBpbmciLCJ0eXBlIiwidXJsIiwiZXJyb3JNZXNzYWdlIiwibWF0Y2hlc0ZvdW5kIiwiZ2V0U2NyYXBpbmdMb2dzIiwiZ2V0U3RhdHMiLCJtYXRjaENvdW50IiwibGl2ZUNvdW50IiwidXBjb21pbmdDb3VudCIsImNvbXBsZXRlZENvdW50IiwidGVhbUNvdW50IiwidG91cm5hbWVudENvdW50IiwidG90YWxfbWF0Y2hlcyIsImxpdmVfbWF0Y2hlcyIsInVwY29taW5nX21hdGNoZXMiLCJjb21wbGV0ZWRfbWF0Y2hlcyIsInRvdGFsX3RlYW1zIiwidG90YWxfdG91cm5hbWVudHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/scraper.ts":
/*!****************************!*\
  !*** ./src/lib/scraper.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VLRScraper: () => (/* binding */ VLRScraper)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var cheerio__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cheerio */ \"(rsc)/./node_modules/cheerio/dist/esm/index.js\");\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./database */ \"(rsc)/./src/lib/database.ts\");\n\n\n\nclass VLRScraper {\n    constructor(){\n        this.baseUrl = 'https://www.vlr.gg';\n        this.rateLimitMs = 1000 // 1 second between requests\n        ;\n        this.db = new _database__WEBPACK_IMPORTED_MODULE_1__.DatabaseService();\n    }\n    async delay(ms) {\n        return new Promise((resolve)=>setTimeout(resolve, ms));\n    }\n    async makeRequest(url) {\n        try {\n            await this.delay(this.rateLimitMs);\n            const response = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get(url, {\n                headers: {\n                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36',\n                    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\n                    'Accept-Language': 'en-US,en;q=0.5',\n                    'Accept-Encoding': 'gzip, deflate',\n                    'Connection': 'keep-alive'\n                },\n                timeout: 10000\n            });\n            return cheerio__WEBPACK_IMPORTED_MODULE_0__.load(response.data);\n        } catch (error) {\n            console.error(`Failed to fetch ${url}:`, error);\n            return null;\n        }\n    }\n    parseTimeString(timeStr) {\n        if (!timeStr) return undefined;\n        const cleanTime = timeStr.trim().toLowerCase();\n        // Handle \"live\" status\n        if (cleanTime.includes('live')) {\n            return new Date().toISOString();\n        }\n        // Handle relative time formats (e.g., \"2h 30m\", \"48m\", \"1d 2h\")\n        try {\n            const now = new Date();\n            let totalMinutes = 0;\n            // Parse days\n            const dayMatch = cleanTime.match(/(\\d+)d/);\n            if (dayMatch) {\n                totalMinutes += parseInt(dayMatch[1]) * 24 * 60;\n            }\n            // Parse hours\n            const hourMatch = cleanTime.match(/(\\d+)h/);\n            if (hourMatch) {\n                totalMinutes += parseInt(hourMatch[1]) * 60;\n            }\n            // Parse minutes\n            const minuteMatch = cleanTime.match(/(\\d+)m/);\n            if (minuteMatch) {\n                totalMinutes += parseInt(minuteMatch[1]);\n            }\n            if (totalMinutes > 0) {\n                const futureTime = new Date(now.getTime() + totalMinutes * 60 * 1000);\n                return futureTime.toISOString();\n            }\n        } catch (error) {\n            console.error('Error parsing time string:', error);\n        }\n        return undefined;\n    }\n    extractMatchIdFromUrl(url) {\n        const match = url.match(/\\/(\\d+)\\//);\n        return match ? match[1] : null;\n    }\n    async scrapeMatchesList(matchesType = '') {\n        const url = `${this.baseUrl}/matches/${matchesType}`;\n        console.log(`Scraping matches from: ${url}`);\n        const $ = await this.makeRequest(url);\n        if (!$) {\n            throw new Error(`Failed to fetch matches page: ${url}`);\n        }\n        const matches = [];\n        // Find match containers - VLR.gg uses different selectors\n        const matchContainers = $('a.wf-module-item, a.match-item').toArray();\n        for (const container of matchContainers){\n            try {\n                const matchData = this.parseMatchContainer($, container);\n                if (matchData) {\n                    matches.push(matchData);\n                }\n            } catch (error) {\n                console.error('Error parsing match container:', error);\n            }\n        }\n        console.log(`Found ${matches.length} matches from ${url}`);\n        return matches;\n    }\n    parseMatchContainer($, container) {\n        try {\n            const $container = $(container);\n            // Extract match URL and ID\n            const matchUrl = $container.attr('href');\n            if (!matchUrl) return null;\n            const fullMatchUrl = matchUrl.startsWith('http') ? matchUrl : `${this.baseUrl}${matchUrl}`;\n            const vlrMatchId = this.extractMatchIdFromUrl(fullMatchUrl);\n            if (!vlrMatchId) return null;\n            // Extract team names\n            const teamElements = $container.find('.match-item-vs-team-name, .team-name, .text-of').toArray();\n            let team1Name = '';\n            let team2Name = '';\n            if (teamElements.length >= 2) {\n                team1Name = $(teamElements[0]).text().trim();\n                team2Name = $(teamElements[1]).text().trim();\n            } else {\n                // Alternative selectors for team names\n                const allTeamText = $container.find('[class*=\"team\"], [class*=\"vs\"]').map((i, el)=>$(el).text().trim()).get();\n                const validTeams = allTeamText.filter((text)=>text && text !== 'vs' && text !== 'â€“' && text !== '-');\n                if (validTeams.length >= 2) {\n                    team1Name = validTeams[0];\n                    team2Name = validTeams[1];\n                }\n            }\n            // Extract scores\n            const scoreElements = $container.find('.match-item-vs-team-score, .score, [class*=\"score\"]').toArray();\n            let team1Score = 0;\n            let team2Score = 0;\n            if (scoreElements.length >= 2) {\n                const score1Text = $(scoreElements[0]).text().trim();\n                const score2Text = $(scoreElements[1]).text().trim();\n                team1Score = score1Text && !isNaN(parseInt(score1Text)) ? parseInt(score1Text) : 0;\n                team2Score = score2Text && !isNaN(parseInt(score2Text)) ? parseInt(score2Text) : 0;\n            }\n            // Determine status\n            let status = 'upcoming';\n            const statusText = $container.find('.match-item-time, .time, [class*=\"time\"], [class*=\"live\"]').text().toLowerCase();\n            if (statusText.includes('live')) {\n                status = 'live';\n            } else if (team1Score > 0 || team2Score > 0) {\n                status = 'completed';\n            }\n            // Extract tournament info\n            const tournamentElement = $container.find('.match-item-event, .event, [class*=\"event\"], .tournament').first();\n            const tournamentName = tournamentElement.text().trim() || 'Unknown Tournament';\n            // Extract stage/series info\n            const stageElement = $container.find('.match-item-event-series, .series, [class*=\"series\"]').first();\n            const stage = stageElement.text().trim();\n            // Extract time\n            const timeElement = $container.find('.match-item-time, .time').first();\n            const timeText = timeElement.text().trim();\n            const matchTime = this.parseTimeString(timeText);\n            // Determine match format (default to Bo3)\n            let matchFormat = 'Bo3';\n            const formatText = $container.text().toLowerCase();\n            if (formatText.includes('bo1')) {\n                matchFormat = 'Bo1';\n            } else if (formatText.includes('bo5')) {\n                matchFormat = 'Bo5';\n            }\n            return {\n                vlr_match_id: vlrMatchId,\n                team1_name: team1Name || undefined,\n                team2_name: team2Name || undefined,\n                team1_score: team1Score,\n                team2_score: team2Score,\n                tournament_name: tournamentName,\n                status,\n                match_time: matchTime,\n                match_format: matchFormat,\n                stage: stage || undefined,\n                match_url: fullMatchUrl\n            };\n        } catch (error) {\n            console.error('Error parsing match container:', error);\n            return null;\n        }\n    }\n    async scrapeMatchDetails(vlrMatchId) {\n        // First, get the match from database to get its URL\n        const matches = this.db.getMatches('all', 1000, 0);\n        const existingMatch = matches.matches.find((m)=>m.vlr_match_id === vlrMatchId);\n        if (!existingMatch?.match_url) {\n            console.error(`No match URL found for VLR match ID: ${vlrMatchId}`);\n            return null;\n        }\n        console.log(`Scraping detailed match data from: ${existingMatch.match_url}`);\n        const $ = await this.makeRequest(existingMatch.match_url);\n        if (!$) {\n            console.error(`Failed to fetch match details page: ${existingMatch.match_url}`);\n            return null;\n        }\n        try {\n            // Extract detailed match information\n            const mapsData = [];\n            const playerStats = [];\n            // Parse map results\n            const mapContainers = $('.vm-stats-game, .map-result, [class*=\"map\"]').toArray();\n            for (const mapContainer of mapContainers){\n                const mapData = this.parseMapData($, mapContainer);\n                if (mapData) {\n                    mapsData.push(mapData);\n                }\n            }\n            // Parse player statistics\n            const playerRows = $('.vm-stats-game-player, .player-stats-row, [class*=\"player\"]').toArray();\n            for (const playerRow of playerRows){\n                const playerData = this.parsePlayerStats($, playerRow);\n                if (playerData) {\n                    playerStats.push(playerData);\n                }\n            }\n            // Extract VOD and stats URLs\n            const vodUrl = $('a[href*=\"youtube\"], a[href*=\"twitch\"], .vod-link').attr('href');\n            const statsUrl = $('a[href*=\"stats\"], .stats-link').attr('href');\n            return {\n                vlr_match_id: vlrMatchId,\n                team1_name: existingMatch.team1?.name,\n                team2_name: existingMatch.team2?.name,\n                team1_score: existingMatch.team1_score,\n                team2_score: existingMatch.team2_score,\n                tournament_name: existingMatch.tournament?.name,\n                status: existingMatch.status,\n                match_time: existingMatch.match_time,\n                match_format: existingMatch.match_format,\n                stage: existingMatch.stage,\n                match_url: existingMatch.match_url,\n                maps_data: mapsData.length > 0 ? mapsData : undefined,\n                player_stats: playerStats.length > 0 ? playerStats : undefined,\n                vod_url: vodUrl ? vodUrl.startsWith('http') ? vodUrl : `${this.baseUrl}${vodUrl}` : undefined,\n                stats_url: statsUrl ? statsUrl.startsWith('http') ? statsUrl : `${this.baseUrl}${statsUrl}` : undefined\n            };\n        } catch (error) {\n            console.error(`Error scraping match details for ${vlrMatchId}:`, error);\n            return null;\n        }\n    }\n    parseMapData($, mapContainer) {\n        try {\n            const $map = $(mapContainer);\n            // Extract map name\n            const mapNameElement = $map.find('.map-name, .vm-stats-game-header-map, [class*=\"map\"]').first();\n            let mapName = mapNameElement.text().trim();\n            // Clean up map name - remove whitespace, tabs, newlines, and extra text\n            if (mapName) {\n                // Remove all whitespace, tabs, and newlines\n                mapName = mapName.replace(/[\\t\\n\\r\\s]+/g, ' ').trim();\n                // Remove common VLR.gg artifacts like \"PICK\", \"BAN\", timestamps, etc.\n                mapName = mapName.replace(/\\b(PICK|BAN|DECIDER)\\b/gi, '').trim();\n                // Remove timestamps (patterns like \"16:30\", \"47:21\", etc.)\n                mapName = mapName.replace(/\\b\\d{1,2}:\\d{2}\\b/g, '').trim();\n                // Extract just the map name (first word should be the actual map)\n                const mapWords = mapName.split(/\\s+/);\n                const validMaps = [\n                    'Bind',\n                    'Haven',\n                    'Split',\n                    'Ascent',\n                    'Dust2',\n                    'Inferno',\n                    'Mirage',\n                    'Cache',\n                    'Overpass',\n                    'Vertigo',\n                    'Nuke',\n                    'Train',\n                    'Cobblestone',\n                    'Icebox',\n                    'Breeze',\n                    'Fracture',\n                    'Pearl',\n                    'Lotus',\n                    'Sunset',\n                    'Abyss'\n                ];\n                // Find the first valid map name in the text\n                for (const word of mapWords){\n                    const cleanWord = word.replace(/[^\\w]/g, '');\n                    const foundMap = validMaps.find((map)=>map.toLowerCase() === cleanWord.toLowerCase());\n                    if (foundMap) {\n                        mapName = foundMap;\n                        break;\n                    }\n                }\n                // If no valid map found but we have text, take the first meaningful word\n                if (!validMaps.some((map)=>map.toLowerCase() === mapName.toLowerCase()) && mapWords.length > 0) {\n                    mapName = mapWords[0].replace(/[^\\w]/g, '');\n                }\n            }\n            // Extract map scores\n            const scoreElements = $map.find('.score, .vm-stats-game-header-score, [class*=\"score\"]').toArray();\n            let team1Score = 0;\n            let team2Score = 0;\n            if (scoreElements.length >= 2) {\n                const score1 = $(scoreElements[0]).text().trim();\n                const score2 = $(scoreElements[1]).text().trim();\n                team1Score = !isNaN(parseInt(score1)) ? parseInt(score1) : 0;\n                team2Score = !isNaN(parseInt(score2)) ? parseInt(score2) : 0;\n            }\n            // Extract agent picks\n            const agents = [];\n            const agentElements = $map.find('img[src*=\"agent\"], .agent-icon, [class*=\"agent\"]').toArray();\n            for (const agentEl of agentElements){\n                const agentSrc = $(agentEl).attr('src') || '';\n                if (agentSrc) {\n                    // Extract agent name from image path\n                    const agentName = agentSrc.split('/').pop()?.split('.')[0] || '';\n                    if (agentName) {\n                        agents.push(agentName);\n                    }\n                }\n            }\n            if (!mapName && team1Score === 0 && team2Score === 0 && agents.length === 0) {\n                return null;\n            }\n            return {\n                map_name: mapName || 'Unknown Map',\n                team1_score: team1Score,\n                team2_score: team2Score,\n                agents\n            };\n        } catch (error) {\n            console.error('Error parsing map data:', error);\n            return null;\n        }\n    }\n    parsePlayerStats($, playerRow) {\n        try {\n            const $row = $(playerRow);\n            // Extract player name\n            const nameElement = $row.find('.player-name, .vm-stats-game-player-name, [class*=\"name\"]').first();\n            const playerName = nameElement.text().trim();\n            if (!playerName) return null;\n            // Extract agent\n            const agentElement = $row.find('img[src*=\"agent\"], .agent').first();\n            const agentSrc = agentElement.attr('src') || '';\n            const agent = agentSrc ? agentSrc.split('/').pop()?.split('.')[0] || '' : '';\n            // Extract stats (kills, deaths, assists, etc.)\n            const statElements = $row.find('.stat, .vm-stats-game-player-stat, [class*=\"stat\"]').toArray();\n            // Default stats\n            let kills = 0;\n            let deaths = 0;\n            let assists = 0;\n            let acs = 0;\n            let kd = 0;\n            let adr = 0;\n            let hsPercent = 0;\n            let fk = 0;\n            let fd = 0;\n            // Try to extract stats from various selectors\n            const statsText = $row.text();\n            const statNumbers = statsText.match(/\\d+/g) || [];\n            if (statNumbers.length >= 3) {\n                kills = parseInt(statNumbers[0]) || 0;\n                deaths = parseInt(statNumbers[1]) || 0;\n                assists = parseInt(statNumbers[2]) || 0;\n                if (statNumbers.length >= 4) acs = parseInt(statNumbers[3]) || 0;\n                if (statNumbers.length >= 6) adr = parseInt(statNumbers[5]) || 0;\n            }\n            // Calculate K/D ratio\n            kd = deaths > 0 ? kills / deaths : kills;\n            return {\n                player_name: playerName,\n                team: 'team1',\n                agent,\n                kills,\n                deaths,\n                assists,\n                acs,\n                k_d_ratio: Math.round(kd * 100) / 100,\n                adr,\n                headshot_percentage: hsPercent,\n                first_kills: fk,\n                first_deaths: fd,\n                maps_played: 1\n            };\n        } catch (error) {\n            console.error('Error parsing player stats:', error);\n            return null;\n        }\n    }\n    async scrapeAllMatches() {\n        const startTime = Date.now();\n        const errors = [];\n        let matchesScraped = 0;\n        let matchesUpdated = 0;\n        let newTeams = 0;\n        let newTournaments = 0;\n        try {\n            // Log start of scraping\n            this.db.logScraping('full_scrape', `${this.baseUrl}/matches`, 'in_progress');\n            // Scrape upcoming matches\n            try {\n                const upcomingMatches = await this.scrapeMatchesList('');\n                for (const matchData of upcomingMatches){\n                    try {\n                        const existingMatch = this.db.getMatches('all', 1000, 0).matches.find((m)=>m.vlr_match_id === matchData.vlr_match_id);\n                        this.db.saveMatch(matchData);\n                        if (existingMatch) {\n                            matchesUpdated++;\n                        } else {\n                            matchesScraped++;\n                        }\n                    } catch (error) {\n                        errors.push(`Error saving upcoming match ${matchData.vlr_match_id}: ${error}`);\n                    }\n                }\n            } catch (error) {\n                errors.push(`Error scraping upcoming matches: ${error}`);\n            }\n            // Scrape completed matches\n            try {\n                const completedMatches = await this.scrapeMatchesList('results');\n                for (const matchData of completedMatches){\n                    try {\n                        const existingMatch = this.db.getMatches('all', 1000, 0).matches.find((m)=>m.vlr_match_id === matchData.vlr_match_id);\n                        this.db.saveMatch(matchData);\n                        if (existingMatch) {\n                            matchesUpdated++;\n                        } else {\n                            matchesScraped++;\n                        }\n                    } catch (error) {\n                        errors.push(`Error saving completed match ${matchData.vlr_match_id}: ${error}`);\n                    }\n                }\n            } catch (error) {\n                errors.push(`Error scraping completed matches: ${error}`);\n            }\n            // Get updated stats\n            const stats = this.db.getStats();\n            newTeams = stats.total_teams;\n            newTournaments = stats.total_tournaments;\n            // Log successful completion\n            this.db.logScraping('full_scrape', `${this.baseUrl}/matches`, 'success', undefined, matchesScraped + matchesUpdated);\n            const duration = Date.now() - startTime;\n            return {\n                success: true,\n                matches_scraped: matchesScraped,\n                matches_updated: matchesUpdated,\n                new_teams: newTeams,\n                new_tournaments: newTournaments,\n                errors,\n                duration_ms: duration\n            };\n        } catch (error) {\n            // Log error\n            this.db.logScraping('full_scrape', `${this.baseUrl}/matches`, 'error', String(error));\n            const duration = Date.now() - startTime;\n            return {\n                success: false,\n                matches_scraped: matchesScraped,\n                matches_updated: matchesUpdated,\n                new_teams: newTeams,\n                new_tournaments: newTournaments,\n                errors: [\n                    ...errors,\n                    `Critical error: ${error}`\n                ],\n                duration_ms: duration\n            };\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3NjcmFwZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEwQjtBQUNTO0FBRVU7QUFFdEMsTUFBTUc7SUFLWEMsYUFBYzthQUpOQyxVQUFVO2FBQ1ZDLGNBQWMsS0FBTSw0QkFBNEI7O1FBSXRELElBQUksQ0FBQ0MsRUFBRSxHQUFHLElBQUlMLHNEQUFlQTtJQUMvQjtJQUVBLE1BQWNNLE1BQU1DLEVBQVUsRUFBaUI7UUFDN0MsT0FBTyxJQUFJQyxRQUFRQyxDQUFBQSxVQUFXQyxXQUFXRCxTQUFTRjtJQUNwRDtJQUVBLE1BQWNJLFlBQVlDLEdBQVcsRUFBc0M7UUFDekUsSUFBSTtZQUNGLE1BQU0sSUFBSSxDQUFDTixLQUFLLENBQUMsSUFBSSxDQUFDRixXQUFXO1lBRWpDLE1BQU1TLFdBQVcsTUFBTWYsNkNBQUtBLENBQUNnQixHQUFHLENBQUNGLEtBQUs7Z0JBQ3BDRyxTQUFTO29CQUNQLGNBQWM7b0JBQ2QsVUFBVTtvQkFDVixtQkFBbUI7b0JBQ25CLG1CQUFtQjtvQkFDbkIsY0FBYztnQkFDaEI7Z0JBQ0FDLFNBQVM7WUFDWDtZQUVBLE9BQU9qQix5Q0FBWSxDQUFDYyxTQUFTSyxJQUFJO1FBQ25DLEVBQUUsT0FBT0MsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRVAsSUFBSSxDQUFDLENBQUMsRUFBRU87WUFDekMsT0FBTztRQUNUO0lBQ0Y7SUFFUUUsZ0JBQWdCQyxPQUFlLEVBQXNCO1FBQzNELElBQUksQ0FBQ0EsU0FBUyxPQUFPQztRQUVyQixNQUFNQyxZQUFZRixRQUFRRyxJQUFJLEdBQUdDLFdBQVc7UUFFNUMsdUJBQXVCO1FBQ3ZCLElBQUlGLFVBQVVHLFFBQVEsQ0FBQyxTQUFTO1lBQzlCLE9BQU8sSUFBSUMsT0FBT0MsV0FBVztRQUMvQjtRQUVBLGdFQUFnRTtRQUNoRSxJQUFJO1lBQ0YsTUFBTUMsTUFBTSxJQUFJRjtZQUNoQixJQUFJRyxlQUFlO1lBRW5CLGFBQWE7WUFDYixNQUFNQyxXQUFXUixVQUFVUyxLQUFLLENBQUM7WUFDakMsSUFBSUQsVUFBVTtnQkFDWkQsZ0JBQWdCRyxTQUFTRixRQUFRLENBQUMsRUFBRSxJQUFJLEtBQUs7WUFDL0M7WUFFQSxjQUFjO1lBQ2QsTUFBTUcsWUFBWVgsVUFBVVMsS0FBSyxDQUFDO1lBQ2xDLElBQUlFLFdBQVc7Z0JBQ2JKLGdCQUFnQkcsU0FBU0MsU0FBUyxDQUFDLEVBQUUsSUFBSTtZQUMzQztZQUVBLGdCQUFnQjtZQUNoQixNQUFNQyxjQUFjWixVQUFVUyxLQUFLLENBQUM7WUFDcEMsSUFBSUcsYUFBYTtnQkFDZkwsZ0JBQWdCRyxTQUFTRSxXQUFXLENBQUMsRUFBRTtZQUN6QztZQUVBLElBQUlMLGVBQWUsR0FBRztnQkFDcEIsTUFBTU0sYUFBYSxJQUFJVCxLQUFLRSxJQUFJUSxPQUFPLEtBQUtQLGVBQWUsS0FBSztnQkFDaEUsT0FBT00sV0FBV1IsV0FBVztZQUMvQjtRQUNGLEVBQUUsT0FBT1YsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsOEJBQThCQTtRQUM5QztRQUVBLE9BQU9JO0lBQ1Q7SUFFUWdCLHNCQUFzQjNCLEdBQVcsRUFBaUI7UUFDeEQsTUFBTXFCLFFBQVFyQixJQUFJcUIsS0FBSyxDQUFDO1FBQ3hCLE9BQU9BLFFBQVFBLEtBQUssQ0FBQyxFQUFFLEdBQUc7SUFDNUI7SUFFQSxNQUFhTyxrQkFBa0JDLGNBQTJDLEVBQUUsRUFBb0M7UUFDOUcsTUFBTTdCLE1BQU0sR0FBRyxJQUFJLENBQUNULE9BQU8sQ0FBQyxTQUFTLEVBQUVzQyxhQUFhO1FBQ3BEckIsUUFBUXNCLEdBQUcsQ0FBQyxDQUFDLHVCQUF1QixFQUFFOUIsS0FBSztRQUUzQyxNQUFNK0IsSUFBSSxNQUFNLElBQUksQ0FBQ2hDLFdBQVcsQ0FBQ0M7UUFDakMsSUFBSSxDQUFDK0IsR0FBRztZQUNOLE1BQU0sSUFBSUMsTUFBTSxDQUFDLDhCQUE4QixFQUFFaEMsS0FBSztRQUN4RDtRQUVBLE1BQU1pQyxVQUFtQyxFQUFFO1FBRTNDLDBEQUEwRDtRQUMxRCxNQUFNQyxrQkFBa0JILEVBQUUsa0NBQWtDSSxPQUFPO1FBRW5FLEtBQUssTUFBTUMsYUFBYUYsZ0JBQWlCO1lBQ3ZDLElBQUk7Z0JBQ0YsTUFBTUcsWUFBWSxJQUFJLENBQUNDLG1CQUFtQixDQUFDUCxHQUFHSztnQkFDOUMsSUFBSUMsV0FBVztvQkFDYkosUUFBUU0sSUFBSSxDQUFDRjtnQkFDZjtZQUNGLEVBQUUsT0FBTzlCLE9BQU87Z0JBQ2RDLFFBQVFELEtBQUssQ0FBQyxrQ0FBa0NBO1lBQ2xEO1FBQ0Y7UUFFQUMsUUFBUXNCLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRUcsUUFBUU8sTUFBTSxDQUFDLGNBQWMsRUFBRXhDLEtBQUs7UUFDekQsT0FBT2lDO0lBQ1Q7SUFFUUssb0JBQW9CUCxDQUFxQixFQUFFSyxTQUEwQixFQUFnQztRQUMzRyxJQUFJO1lBQ0YsTUFBTUssYUFBYVYsRUFBRUs7WUFFckIsMkJBQTJCO1lBQzNCLE1BQU1NLFdBQVdELFdBQVdFLElBQUksQ0FBQztZQUNqQyxJQUFJLENBQUNELFVBQVUsT0FBTztZQUV0QixNQUFNRSxlQUFlRixTQUFTRyxVQUFVLENBQUMsVUFBVUgsV0FBVyxHQUFHLElBQUksQ0FBQ25ELE9BQU8sR0FBR21ELFVBQVU7WUFDMUYsTUFBTUksYUFBYSxJQUFJLENBQUNuQixxQkFBcUIsQ0FBQ2lCO1lBQzlDLElBQUksQ0FBQ0UsWUFBWSxPQUFPO1lBRXhCLHFCQUFxQjtZQUNyQixNQUFNQyxlQUFlTixXQUFXTyxJQUFJLENBQUMsa0RBQWtEYixPQUFPO1lBQzlGLElBQUljLFlBQVk7WUFDaEIsSUFBSUMsWUFBWTtZQUVoQixJQUFJSCxhQUFhUCxNQUFNLElBQUksR0FBRztnQkFDNUJTLFlBQVlsQixFQUFFZ0IsWUFBWSxDQUFDLEVBQUUsRUFBRUksSUFBSSxHQUFHdEMsSUFBSTtnQkFDMUNxQyxZQUFZbkIsRUFBRWdCLFlBQVksQ0FBQyxFQUFFLEVBQUVJLElBQUksR0FBR3RDLElBQUk7WUFDNUMsT0FBTztnQkFDTCx1Q0FBdUM7Z0JBQ3ZDLE1BQU11QyxjQUFjWCxXQUFXTyxJQUFJLENBQUMsa0NBQWtDSyxHQUFHLENBQUMsQ0FBQ0MsR0FBR0MsS0FBT3hCLEVBQUV3QixJQUFJSixJQUFJLEdBQUd0QyxJQUFJLElBQUlYLEdBQUc7Z0JBQzdHLE1BQU1zRCxhQUFhSixZQUFZSyxNQUFNLENBQUNOLENBQUFBLE9BQVFBLFFBQVFBLFNBQVMsUUFBUUEsU0FBUyxPQUFPQSxTQUFTO2dCQUNoRyxJQUFJSyxXQUFXaEIsTUFBTSxJQUFJLEdBQUc7b0JBQzFCUyxZQUFZTyxVQUFVLENBQUMsRUFBRTtvQkFDekJOLFlBQVlNLFVBQVUsQ0FBQyxFQUFFO2dCQUMzQjtZQUNGO1lBRUEsaUJBQWlCO1lBQ2pCLE1BQU1FLGdCQUFnQmpCLFdBQVdPLElBQUksQ0FBQyx1REFBdURiLE9BQU87WUFDcEcsSUFBSXdCLGFBQWE7WUFDakIsSUFBSUMsYUFBYTtZQUVqQixJQUFJRixjQUFjbEIsTUFBTSxJQUFJLEdBQUc7Z0JBQzdCLE1BQU1xQixhQUFhOUIsRUFBRTJCLGFBQWEsQ0FBQyxFQUFFLEVBQUVQLElBQUksR0FBR3RDLElBQUk7Z0JBQ2xELE1BQU1pRCxhQUFhL0IsRUFBRTJCLGFBQWEsQ0FBQyxFQUFFLEVBQUVQLElBQUksR0FBR3RDLElBQUk7Z0JBRWxEOEMsYUFBYUUsY0FBYyxDQUFDRSxNQUFNekMsU0FBU3VDLGVBQWV2QyxTQUFTdUMsY0FBYztnQkFDakZELGFBQWFFLGNBQWMsQ0FBQ0MsTUFBTXpDLFNBQVN3QyxlQUFleEMsU0FBU3dDLGNBQWM7WUFDbkY7WUFFQSxtQkFBbUI7WUFDbkIsSUFBSUUsU0FBNEM7WUFDaEQsTUFBTUMsYUFBYXhCLFdBQVdPLElBQUksQ0FBQyw2REFBNkRHLElBQUksR0FBR3JDLFdBQVc7WUFFbEgsSUFBSW1ELFdBQVdsRCxRQUFRLENBQUMsU0FBUztnQkFDL0JpRCxTQUFTO1lBQ1gsT0FBTyxJQUFJTCxhQUFhLEtBQUtDLGFBQWEsR0FBRztnQkFDM0NJLFNBQVM7WUFDWDtZQUVBLDBCQUEwQjtZQUMxQixNQUFNRSxvQkFBb0J6QixXQUFXTyxJQUFJLENBQUMsNERBQTREbUIsS0FBSztZQUMzRyxNQUFNQyxpQkFBaUJGLGtCQUFrQmYsSUFBSSxHQUFHdEMsSUFBSSxNQUFNO1lBRTFELDRCQUE0QjtZQUM1QixNQUFNd0QsZUFBZTVCLFdBQVdPLElBQUksQ0FBQyx3REFBd0RtQixLQUFLO1lBQ2xHLE1BQU1HLFFBQVFELGFBQWFsQixJQUFJLEdBQUd0QyxJQUFJO1lBRXRDLGVBQWU7WUFDZixNQUFNMEQsY0FBYzlCLFdBQVdPLElBQUksQ0FBQywyQkFBMkJtQixLQUFLO1lBQ3BFLE1BQU1LLFdBQVdELFlBQVlwQixJQUFJLEdBQUd0QyxJQUFJO1lBQ3hDLE1BQU00RCxZQUFZLElBQUksQ0FBQ2hFLGVBQWUsQ0FBQytEO1lBRXZDLDBDQUEwQztZQUMxQyxJQUFJRSxjQUFjO1lBQ2xCLE1BQU1DLGFBQWFsQyxXQUFXVSxJQUFJLEdBQUdyQyxXQUFXO1lBQ2hELElBQUk2RCxXQUFXNUQsUUFBUSxDQUFDLFFBQVE7Z0JBQzlCMkQsY0FBYztZQUNoQixPQUFPLElBQUlDLFdBQVc1RCxRQUFRLENBQUMsUUFBUTtnQkFDckMyRCxjQUFjO1lBQ2hCO1lBRUEsT0FBTztnQkFDTEUsY0FBYzlCO2dCQUNkK0IsWUFBWTVCLGFBQWF0QztnQkFDekJtRSxZQUFZNUIsYUFBYXZDO2dCQUN6Qm9FLGFBQWFwQjtnQkFDYnFCLGFBQWFwQjtnQkFDYnFCLGlCQUFpQmI7Z0JBQ2pCSjtnQkFDQWtCLFlBQVlUO2dCQUNaVSxjQUFjVDtnQkFDZEosT0FBT0EsU0FBUzNEO2dCQUNoQnlFLFdBQVd4QztZQUNiO1FBRUYsRUFBRSxPQUFPckMsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsa0NBQWtDQTtZQUNoRCxPQUFPO1FBQ1Q7SUFDRjtJQUVBLE1BQWE4RSxtQkFBbUJ2QyxVQUFrQixFQUF5QztRQUN6RixvREFBb0Q7UUFDcEQsTUFBTWIsVUFBVSxJQUFJLENBQUN4QyxFQUFFLENBQUM2RixVQUFVLENBQUMsT0FBTyxNQUFNO1FBQ2hELE1BQU1DLGdCQUFnQnRELFFBQVFBLE9BQU8sQ0FBQ2UsSUFBSSxDQUFDd0MsQ0FBQUEsSUFBS0EsRUFBRVosWUFBWSxLQUFLOUI7UUFFbkUsSUFBSSxDQUFDeUMsZUFBZUgsV0FBVztZQUM3QjVFLFFBQVFELEtBQUssQ0FBQyxDQUFDLHFDQUFxQyxFQUFFdUMsWUFBWTtZQUNsRSxPQUFPO1FBQ1Q7UUFFQXRDLFFBQVFzQixHQUFHLENBQUMsQ0FBQyxtQ0FBbUMsRUFBRXlELGNBQWNILFNBQVMsRUFBRTtRQUUzRSxNQUFNckQsSUFBSSxNQUFNLElBQUksQ0FBQ2hDLFdBQVcsQ0FBQ3dGLGNBQWNILFNBQVM7UUFDeEQsSUFBSSxDQUFDckQsR0FBRztZQUNOdkIsUUFBUUQsS0FBSyxDQUFDLENBQUMsb0NBQW9DLEVBQUVnRixjQUFjSCxTQUFTLEVBQUU7WUFDOUUsT0FBTztRQUNUO1FBRUEsSUFBSTtZQUNGLHFDQUFxQztZQUNyQyxNQUFNSyxXQUFzQixFQUFFO1lBQzlCLE1BQU1DLGNBQTZCLEVBQUU7WUFFckMsb0JBQW9CO1lBQ3BCLE1BQU1DLGdCQUFnQjVELEVBQUUsK0NBQStDSSxPQUFPO1lBRTlFLEtBQUssTUFBTXlELGdCQUFnQkQsY0FBZTtnQkFDeEMsTUFBTUUsVUFBVSxJQUFJLENBQUNDLFlBQVksQ0FBQy9ELEdBQUc2RDtnQkFDckMsSUFBSUMsU0FBUztvQkFDWEosU0FBU2xELElBQUksQ0FBQ3NEO2dCQUNoQjtZQUNGO1lBRUEsMEJBQTBCO1lBQzFCLE1BQU1FLGFBQWFoRSxFQUFFLCtEQUErREksT0FBTztZQUUzRixLQUFLLE1BQU02RCxhQUFhRCxXQUFZO2dCQUNsQyxNQUFNRSxhQUFhLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNuRSxHQUFHaUU7Z0JBQzVDLElBQUlDLFlBQVk7b0JBQ2RQLFlBQVluRCxJQUFJLENBQUMwRDtnQkFDbkI7WUFDRjtZQUVBLDZCQUE2QjtZQUM3QixNQUFNRSxTQUFTcEUsRUFBRSxvREFBb0RZLElBQUksQ0FBQztZQUMxRSxNQUFNeUQsV0FBV3JFLEVBQUUsaUNBQWlDWSxJQUFJLENBQUM7WUFFekQsT0FBTztnQkFDTGlDLGNBQWM5QjtnQkFDZCtCLFlBQVlVLGNBQWNjLEtBQUssRUFBRUM7Z0JBQ2pDeEIsWUFBWVMsY0FBY2dCLEtBQUssRUFBRUQ7Z0JBQ2pDdkIsYUFBYVEsY0FBY1IsV0FBVztnQkFDdENDLGFBQWFPLGNBQWNQLFdBQVc7Z0JBQ3RDQyxpQkFBaUJNLGNBQWNpQixVQUFVLEVBQUVGO2dCQUMzQ3RDLFFBQVF1QixjQUFjdkIsTUFBTTtnQkFDNUJrQixZQUFZSyxjQUFjTCxVQUFVO2dCQUNwQ0MsY0FBY0ksY0FBY0osWUFBWTtnQkFDeENiLE9BQU9pQixjQUFjakIsS0FBSztnQkFDMUJjLFdBQVdHLGNBQWNILFNBQVM7Z0JBQ2xDcUIsV0FBV2hCLFNBQVNqRCxNQUFNLEdBQUcsSUFBSWlELFdBQVc5RTtnQkFDNUMrRixjQUFjaEIsWUFBWWxELE1BQU0sR0FBRyxJQUFJa0QsY0FBYy9FO2dCQUNyRGdHLFNBQVNSLFNBQVVBLE9BQU90RCxVQUFVLENBQUMsVUFBVXNELFNBQVMsR0FBRyxJQUFJLENBQUM1RyxPQUFPLEdBQUc0RyxRQUFRLEdBQUl4RjtnQkFDdEZpRyxXQUFXUixXQUFZQSxTQUFTdkQsVUFBVSxDQUFDLFVBQVV1RCxXQUFXLEdBQUcsSUFBSSxDQUFDN0csT0FBTyxHQUFHNkcsVUFBVSxHQUFJekY7WUFDbEc7UUFFRixFQUFFLE9BQU9KLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLENBQUMsaUNBQWlDLEVBQUV1QyxXQUFXLENBQUMsQ0FBQyxFQUFFdkM7WUFDakUsT0FBTztRQUNUO0lBQ0Y7SUFFUXVGLGFBQWEvRCxDQUFxQixFQUFFNkQsWUFBNkIsRUFBa0I7UUFDekYsSUFBSTtZQUNGLE1BQU1pQixPQUFPOUUsRUFBRTZEO1lBRWYsbUJBQW1CO1lBQ25CLE1BQU1rQixpQkFBaUJELEtBQUs3RCxJQUFJLENBQUMsd0RBQXdEbUIsS0FBSztZQUM5RixJQUFJNEMsVUFBVUQsZUFBZTNELElBQUksR0FBR3RDLElBQUk7WUFFeEMsd0VBQXdFO1lBQ3hFLElBQUlrRyxTQUFTO2dCQUNYLDRDQUE0QztnQkFDNUNBLFVBQVVBLFFBQVFDLE9BQU8sQ0FBQyxnQkFBZ0IsS0FBS25HLElBQUk7Z0JBRW5ELHNFQUFzRTtnQkFDdEVrRyxVQUFVQSxRQUFRQyxPQUFPLENBQUMsNEJBQTRCLElBQUluRyxJQUFJO2dCQUU5RCwyREFBMkQ7Z0JBQzNEa0csVUFBVUEsUUFBUUMsT0FBTyxDQUFDLHNCQUFzQixJQUFJbkcsSUFBSTtnQkFFeEQsa0VBQWtFO2dCQUNsRSxNQUFNb0csV0FBV0YsUUFBUUcsS0FBSyxDQUFDO2dCQUMvQixNQUFNQyxZQUFZO29CQUFDO29CQUFRO29CQUFTO29CQUFTO29CQUFVO29CQUFTO29CQUFXO29CQUFVO29CQUFTO29CQUFZO29CQUFXO29CQUFRO29CQUFTO29CQUFlO29CQUFVO29CQUFVO29CQUFZO29CQUFTO29CQUFTO29CQUFVO2lCQUFRO2dCQUV6Tiw0Q0FBNEM7Z0JBQzVDLEtBQUssTUFBTUMsUUFBUUgsU0FBVTtvQkFDM0IsTUFBTUksWUFBWUQsS0FBS0osT0FBTyxDQUFDLFVBQVU7b0JBQ3pDLE1BQU1NLFdBQVdILFVBQVVuRSxJQUFJLENBQUNLLENBQUFBLE1BQU9BLElBQUl2QyxXQUFXLE9BQU91RyxVQUFVdkcsV0FBVztvQkFDbEYsSUFBSXdHLFVBQVU7d0JBQ1pQLFVBQVVPO3dCQUNWO29CQUNGO2dCQUNGO2dCQUVBLHlFQUF5RTtnQkFDekUsSUFBSSxDQUFDSCxVQUFVSSxJQUFJLENBQUNsRSxDQUFBQSxNQUFPQSxJQUFJdkMsV0FBVyxPQUFPaUcsUUFBUWpHLFdBQVcsT0FBT21HLFNBQVN6RSxNQUFNLEdBQUcsR0FBRztvQkFDOUZ1RSxVQUFVRSxRQUFRLENBQUMsRUFBRSxDQUFDRCxPQUFPLENBQUMsVUFBVTtnQkFDMUM7WUFDRjtZQUVBLHFCQUFxQjtZQUNyQixNQUFNdEQsZ0JBQWdCbUQsS0FBSzdELElBQUksQ0FBQyx5REFBeURiLE9BQU87WUFDaEcsSUFBSXdCLGFBQWE7WUFDakIsSUFBSUMsYUFBYTtZQUVqQixJQUFJRixjQUFjbEIsTUFBTSxJQUFJLEdBQUc7Z0JBQzdCLE1BQU1nRixTQUFTekYsRUFBRTJCLGFBQWEsQ0FBQyxFQUFFLEVBQUVQLElBQUksR0FBR3RDLElBQUk7Z0JBQzlDLE1BQU00RyxTQUFTMUYsRUFBRTJCLGFBQWEsQ0FBQyxFQUFFLEVBQUVQLElBQUksR0FBR3RDLElBQUk7Z0JBRTlDOEMsYUFBYSxDQUFDSSxNQUFNekMsU0FBU2tHLFdBQVdsRyxTQUFTa0csVUFBVTtnQkFDM0Q1RCxhQUFhLENBQUNHLE1BQU16QyxTQUFTbUcsV0FBV25HLFNBQVNtRyxVQUFVO1lBQzdEO1lBRUEsc0JBQXNCO1lBQ3RCLE1BQU1DLFNBQW1CLEVBQUU7WUFDM0IsTUFBTUMsZ0JBQWdCZCxLQUFLN0QsSUFBSSxDQUFDLG9EQUFvRGIsT0FBTztZQUUzRixLQUFLLE1BQU15RixXQUFXRCxjQUFlO2dCQUNuQyxNQUFNRSxXQUFXOUYsRUFBRTZGLFNBQVNqRixJQUFJLENBQUMsVUFBVTtnQkFDM0MsSUFBSWtGLFVBQVU7b0JBQ1oscUNBQXFDO29CQUNyQyxNQUFNQyxZQUFZRCxTQUFTWCxLQUFLLENBQUMsS0FBS2EsR0FBRyxJQUFJYixNQUFNLElBQUksQ0FBQyxFQUFFLElBQUk7b0JBQzlELElBQUlZLFdBQVc7d0JBQ2JKLE9BQU9uRixJQUFJLENBQUN1RjtvQkFDZDtnQkFDRjtZQUNGO1lBRUEsSUFBSSxDQUFDZixXQUFXcEQsZUFBZSxLQUFLQyxlQUFlLEtBQUs4RCxPQUFPbEYsTUFBTSxLQUFLLEdBQUc7Z0JBQzNFLE9BQU87WUFDVDtZQUVBLE9BQU87Z0JBQ0x3RixVQUFVakIsV0FBVztnQkFDckJoQyxhQUFhcEI7Z0JBQ2JxQixhQUFhcEI7Z0JBQ2I4RDtZQUNGO1FBRUYsRUFBRSxPQUFPbkgsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsMkJBQTJCQTtZQUN6QyxPQUFPO1FBQ1Q7SUFDRjtJQUVRMkYsaUJBQWlCbkUsQ0FBcUIsRUFBRWlFLFNBQTBCLEVBQXNCO1FBQzlGLElBQUk7WUFDRixNQUFNaUMsT0FBT2xHLEVBQUVpRTtZQUVmLHNCQUFzQjtZQUN0QixNQUFNa0MsY0FBY0QsS0FBS2pGLElBQUksQ0FBQyw2REFBNkRtQixLQUFLO1lBQ2hHLE1BQU1nRSxhQUFhRCxZQUFZL0UsSUFBSSxHQUFHdEMsSUFBSTtZQUUxQyxJQUFJLENBQUNzSCxZQUFZLE9BQU87WUFFeEIsZ0JBQWdCO1lBQ2hCLE1BQU1DLGVBQWVILEtBQUtqRixJQUFJLENBQUMsNkJBQTZCbUIsS0FBSztZQUNqRSxNQUFNMEQsV0FBV08sYUFBYXpGLElBQUksQ0FBQyxVQUFVO1lBQzdDLE1BQU0wRixRQUFRUixXQUFXQSxTQUFTWCxLQUFLLENBQUMsS0FBS2EsR0FBRyxJQUFJYixNQUFNLElBQUksQ0FBQyxFQUFFLElBQUksS0FBSztZQUUxRSwrQ0FBK0M7WUFDL0MsTUFBTW9CLGVBQWVMLEtBQUtqRixJQUFJLENBQUMsc0RBQXNEYixPQUFPO1lBRTVGLGdCQUFnQjtZQUNoQixJQUFJb0csUUFBUTtZQUNaLElBQUlDLFNBQVM7WUFDYixJQUFJQyxVQUFVO1lBQ2QsSUFBSUMsTUFBTTtZQUNWLElBQUlDLEtBQUs7WUFDVCxJQUFJQyxNQUFNO1lBQ1YsSUFBSUMsWUFBWTtZQUNoQixJQUFJQyxLQUFLO1lBQ1QsSUFBSUMsS0FBSztZQUVULDhDQUE4QztZQUM5QyxNQUFNQyxZQUFZZixLQUFLOUUsSUFBSTtZQUMzQixNQUFNOEYsY0FBY0QsVUFBVTNILEtBQUssQ0FBQyxXQUFXLEVBQUU7WUFFakQsSUFBSTRILFlBQVl6RyxNQUFNLElBQUksR0FBRztnQkFDM0IrRixRQUFRakgsU0FBUzJILFdBQVcsQ0FBQyxFQUFFLEtBQUs7Z0JBQ3BDVCxTQUFTbEgsU0FBUzJILFdBQVcsQ0FBQyxFQUFFLEtBQUs7Z0JBQ3JDUixVQUFVbkgsU0FBUzJILFdBQVcsQ0FBQyxFQUFFLEtBQUs7Z0JBRXRDLElBQUlBLFlBQVl6RyxNQUFNLElBQUksR0FBR2tHLE1BQU1wSCxTQUFTMkgsV0FBVyxDQUFDLEVBQUUsS0FBSztnQkFDL0QsSUFBSUEsWUFBWXpHLE1BQU0sSUFBSSxHQUFHb0csTUFBTXRILFNBQVMySCxXQUFXLENBQUMsRUFBRSxLQUFLO1lBQ2pFO1lBRUEsc0JBQXNCO1lBQ3RCTixLQUFLSCxTQUFTLElBQUlELFFBQVFDLFNBQVNEO1lBRW5DLE9BQU87Z0JBQ0xXLGFBQWFmO2dCQUNiZ0IsTUFBTTtnQkFDTmQ7Z0JBQ0FFO2dCQUNBQztnQkFDQUM7Z0JBQ0FDO2dCQUNBVSxXQUFXQyxLQUFLQyxLQUFLLENBQUNYLEtBQUssT0FBTztnQkFDbENDO2dCQUNBVyxxQkFBcUJWO2dCQUNyQlcsYUFBYVY7Z0JBQ2JXLGNBQWNWO2dCQUNkVyxhQUFhO1lBQ2Y7UUFFRixFQUFFLE9BQU9uSixPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQywrQkFBK0JBO1lBQzdDLE9BQU87UUFDVDtJQUNGO0lBRUEsTUFBYW9KLG1CQUE0QztRQUN2RCxNQUFNQyxZQUFZNUksS0FBS0UsR0FBRztRQUMxQixNQUFNMkksU0FBbUIsRUFBRTtRQUMzQixJQUFJQyxpQkFBaUI7UUFDckIsSUFBSUMsaUJBQWlCO1FBQ3JCLElBQUlDLFdBQVc7UUFDZixJQUFJQyxpQkFBaUI7UUFFckIsSUFBSTtZQUNGLHdCQUF3QjtZQUN4QixJQUFJLENBQUN4SyxFQUFFLENBQUN5SyxXQUFXLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQzNLLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUU5RCwwQkFBMEI7WUFDMUIsSUFBSTtnQkFDRixNQUFNNEssa0JBQWtCLE1BQU0sSUFBSSxDQUFDdkksaUJBQWlCLENBQUM7Z0JBQ3JELEtBQUssTUFBTVMsYUFBYThILGdCQUFpQjtvQkFDdkMsSUFBSTt3QkFDRixNQUFNNUUsZ0JBQWdCLElBQUksQ0FBQzlGLEVBQUUsQ0FBQzZGLFVBQVUsQ0FBQyxPQUFPLE1BQU0sR0FBR3JELE9BQU8sQ0FBQ2UsSUFBSSxDQUFDd0MsQ0FBQUEsSUFBS0EsRUFBRVosWUFBWSxLQUFLdkMsVUFBVXVDLFlBQVk7d0JBRXBILElBQUksQ0FBQ25GLEVBQUUsQ0FBQzJLLFNBQVMsQ0FBQy9IO3dCQUVsQixJQUFJa0QsZUFBZTs0QkFDakJ3RTt3QkFDRixPQUFPOzRCQUNMRDt3QkFDRjtvQkFDRixFQUFFLE9BQU92SixPQUFPO3dCQUNkc0osT0FBT3RILElBQUksQ0FBQyxDQUFDLDRCQUE0QixFQUFFRixVQUFVdUMsWUFBWSxDQUFDLEVBQUUsRUFBRXJFLE9BQU87b0JBQy9FO2dCQUNGO1lBQ0YsRUFBRSxPQUFPQSxPQUFPO2dCQUNkc0osT0FBT3RILElBQUksQ0FBQyxDQUFDLGlDQUFpQyxFQUFFaEMsT0FBTztZQUN6RDtZQUVBLDJCQUEyQjtZQUMzQixJQUFJO2dCQUNGLE1BQU04SixtQkFBbUIsTUFBTSxJQUFJLENBQUN6SSxpQkFBaUIsQ0FBQztnQkFDdEQsS0FBSyxNQUFNUyxhQUFhZ0ksaUJBQWtCO29CQUN4QyxJQUFJO3dCQUNGLE1BQU05RSxnQkFBZ0IsSUFBSSxDQUFDOUYsRUFBRSxDQUFDNkYsVUFBVSxDQUFDLE9BQU8sTUFBTSxHQUFHckQsT0FBTyxDQUFDZSxJQUFJLENBQUN3QyxDQUFBQSxJQUFLQSxFQUFFWixZQUFZLEtBQUt2QyxVQUFVdUMsWUFBWTt3QkFFcEgsSUFBSSxDQUFDbkYsRUFBRSxDQUFDMkssU0FBUyxDQUFDL0g7d0JBRWxCLElBQUlrRCxlQUFlOzRCQUNqQndFO3dCQUNGLE9BQU87NEJBQ0xEO3dCQUNGO29CQUNGLEVBQUUsT0FBT3ZKLE9BQU87d0JBQ2RzSixPQUFPdEgsSUFBSSxDQUFDLENBQUMsNkJBQTZCLEVBQUVGLFVBQVV1QyxZQUFZLENBQUMsRUFBRSxFQUFFckUsT0FBTztvQkFDaEY7Z0JBQ0Y7WUFDRixFQUFFLE9BQU9BLE9BQU87Z0JBQ2RzSixPQUFPdEgsSUFBSSxDQUFDLENBQUMsa0NBQWtDLEVBQUVoQyxPQUFPO1lBQzFEO1lBRUEsb0JBQW9CO1lBQ3BCLE1BQU0rSixRQUFRLElBQUksQ0FBQzdLLEVBQUUsQ0FBQzhLLFFBQVE7WUFDOUJQLFdBQVdNLE1BQU1FLFdBQVc7WUFDNUJQLGlCQUFpQkssTUFBTUcsaUJBQWlCO1lBRXhDLDRCQUE0QjtZQUM1QixJQUFJLENBQUNoTCxFQUFFLENBQUN5SyxXQUFXLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQzNLLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxXQUFXb0IsV0FBV21KLGlCQUFpQkM7WUFFckcsTUFBTVcsV0FBVzFKLEtBQUtFLEdBQUcsS0FBSzBJO1lBRTlCLE9BQU87Z0JBQ0xlLFNBQVM7Z0JBQ1RDLGlCQUFpQmQ7Z0JBQ2pCZSxpQkFBaUJkO2dCQUNqQmUsV0FBV2Q7Z0JBQ1hlLGlCQUFpQmQ7Z0JBQ2pCSjtnQkFDQW1CLGFBQWFOO1lBQ2Y7UUFFRixFQUFFLE9BQU9uSyxPQUFPO1lBQ2QsWUFBWTtZQUNaLElBQUksQ0FBQ2QsRUFBRSxDQUFDeUssV0FBVyxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMzSyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsU0FBUzBMLE9BQU8xSztZQUU5RSxNQUFNbUssV0FBVzFKLEtBQUtFLEdBQUcsS0FBSzBJO1lBRTlCLE9BQU87Z0JBQ0xlLFNBQVM7Z0JBQ1RDLGlCQUFpQmQ7Z0JBQ2pCZSxpQkFBaUJkO2dCQUNqQmUsV0FBV2Q7Z0JBQ1hlLGlCQUFpQmQ7Z0JBQ2pCSixRQUFRO3VCQUFJQTtvQkFBUSxDQUFDLGdCQUFnQixFQUFFdEosT0FBTztpQkFBQztnQkFDL0N5SyxhQUFhTjtZQUNmO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL3NyYy9saWIvc2NyYXBlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0ICogYXMgY2hlZXJpbyBmcm9tICdjaGVlcmlvJztcbmltcG9ydCB7IE1hdGNoRGV0YWlsU2NyYXBlRGF0YSwgTWFwRGF0YSwgUGxheWVyU3RhdHMsIFNjcmFwZVJlc3BvbnNlIH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgeyBEYXRhYmFzZVNlcnZpY2UgfSBmcm9tICcuL2RhdGFiYXNlJztcblxuZXhwb3J0IGNsYXNzIFZMUlNjcmFwZXIge1xuICBwcml2YXRlIGJhc2VVcmwgPSAnaHR0cHM6Ly93d3cudmxyLmdnJztcbiAgcHJpdmF0ZSByYXRlTGltaXRNcyA9IDEwMDA7IC8vIDEgc2Vjb25kIGJldHdlZW4gcmVxdWVzdHNcbiAgcHJpdmF0ZSBkYjogRGF0YWJhc2VTZXJ2aWNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZGIgPSBuZXcgRGF0YWJhc2VTZXJ2aWNlKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRlbGF5KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0KHVybDogc3RyaW5nKTogUHJvbWlzZTxjaGVlcmlvLkNoZWVyaW9BUEkgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuZGVsYXkodGhpcy5yYXRlTGltaXRNcyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KHVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzkxLjAuNDQ3Mi4xMjQgU2FmYXJpLzUzNy4zNicsXG4gICAgICAgICAgJ0FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSwqLyo7cT0wLjgnLFxuICAgICAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAnZW4tVVMsZW47cT0wLjUnLFxuICAgICAgICAgICdBY2NlcHQtRW5jb2RpbmcnOiAnZ3ppcCwgZGVmbGF0ZScsXG4gICAgICAgICAgJ0Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVvdXQ6IDEwMDAwLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBjaGVlcmlvLmxvYWQocmVzcG9uc2UuZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmZXRjaCAke3VybH06YCwgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZVRpbWVTdHJpbmcodGltZVN0cjogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoIXRpbWVTdHIpIHJldHVybiB1bmRlZmluZWQ7XG5cbiAgICBjb25zdCBjbGVhblRpbWUgPSB0aW1lU3RyLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gSGFuZGxlIFwibGl2ZVwiIHN0YXR1c1xuICAgIGlmIChjbGVhblRpbWUuaW5jbHVkZXMoJ2xpdmUnKSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcmVsYXRpdmUgdGltZSBmb3JtYXRzIChlLmcuLCBcIjJoIDMwbVwiLCBcIjQ4bVwiLCBcIjFkIDJoXCIpXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICBsZXQgdG90YWxNaW51dGVzID0gMDtcblxuICAgICAgLy8gUGFyc2UgZGF5c1xuICAgICAgY29uc3QgZGF5TWF0Y2ggPSBjbGVhblRpbWUubWF0Y2goLyhcXGQrKWQvKTtcbiAgICAgIGlmIChkYXlNYXRjaCkge1xuICAgICAgICB0b3RhbE1pbnV0ZXMgKz0gcGFyc2VJbnQoZGF5TWF0Y2hbMV0pICogMjQgKiA2MDtcbiAgICAgIH1cblxuICAgICAgLy8gUGFyc2UgaG91cnNcbiAgICAgIGNvbnN0IGhvdXJNYXRjaCA9IGNsZWFuVGltZS5tYXRjaCgvKFxcZCspaC8pO1xuICAgICAgaWYgKGhvdXJNYXRjaCkge1xuICAgICAgICB0b3RhbE1pbnV0ZXMgKz0gcGFyc2VJbnQoaG91ck1hdGNoWzFdKSAqIDYwO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXJzZSBtaW51dGVzXG4gICAgICBjb25zdCBtaW51dGVNYXRjaCA9IGNsZWFuVGltZS5tYXRjaCgvKFxcZCspbS8pO1xuICAgICAgaWYgKG1pbnV0ZU1hdGNoKSB7XG4gICAgICAgIHRvdGFsTWludXRlcyArPSBwYXJzZUludChtaW51dGVNYXRjaFsxXSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0b3RhbE1pbnV0ZXMgPiAwKSB7XG4gICAgICAgIGNvbnN0IGZ1dHVyZVRpbWUgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgdG90YWxNaW51dGVzICogNjAgKiAxMDAwKTtcbiAgICAgICAgcmV0dXJuIGZ1dHVyZVRpbWUudG9JU09TdHJpbmcoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyB0aW1lIHN0cmluZzonLCBlcnJvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHByaXZhdGUgZXh0cmFjdE1hdGNoSWRGcm9tVXJsKHVybDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgbWF0Y2ggPSB1cmwubWF0Y2goL1xcLyhcXGQrKVxcLy8pO1xuICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzY3JhcGVNYXRjaGVzTGlzdChtYXRjaGVzVHlwZTogJ3VwY29taW5nJyB8ICdyZXN1bHRzJyB8ICcnID0gJycpOiBQcm9taXNlPE1hdGNoRGV0YWlsU2NyYXBlRGF0YVtdPiB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfS9tYXRjaGVzLyR7bWF0Y2hlc1R5cGV9YDtcbiAgICBjb25zb2xlLmxvZyhgU2NyYXBpbmcgbWF0Y2hlcyBmcm9tOiAke3VybH1gKTtcblxuICAgIGNvbnN0ICQgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KHVybCk7XG4gICAgaWYgKCEkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBtYXRjaGVzIHBhZ2U6ICR7dXJsfWApO1xuICAgIH1cblxuICAgIGNvbnN0IG1hdGNoZXM6IE1hdGNoRGV0YWlsU2NyYXBlRGF0YVtdID0gW107XG5cbiAgICAvLyBGaW5kIG1hdGNoIGNvbnRhaW5lcnMgLSBWTFIuZ2cgdXNlcyBkaWZmZXJlbnQgc2VsZWN0b3JzXG4gICAgY29uc3QgbWF0Y2hDb250YWluZXJzID0gJCgnYS53Zi1tb2R1bGUtaXRlbSwgYS5tYXRjaC1pdGVtJykudG9BcnJheSgpO1xuXG4gICAgZm9yIChjb25zdCBjb250YWluZXIgb2YgbWF0Y2hDb250YWluZXJzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBtYXRjaERhdGEgPSB0aGlzLnBhcnNlTWF0Y2hDb250YWluZXIoJCwgY29udGFpbmVyKTtcbiAgICAgICAgaWYgKG1hdGNoRGF0YSkge1xuICAgICAgICAgIG1hdGNoZXMucHVzaChtYXRjaERhdGEpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIG1hdGNoIGNvbnRhaW5lcjonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYEZvdW5kICR7bWF0Y2hlcy5sZW5ndGh9IG1hdGNoZXMgZnJvbSAke3VybH1gKTtcbiAgICByZXR1cm4gbWF0Y2hlcztcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VNYXRjaENvbnRhaW5lcigkOiBjaGVlcmlvLkNoZWVyaW9BUEksIGNvbnRhaW5lcjogY2hlZXJpby5FbGVtZW50KTogTWF0Y2hEZXRhaWxTY3JhcGVEYXRhIHwgbnVsbCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0ICRjb250YWluZXIgPSAkKGNvbnRhaW5lcik7XG4gICAgICBcbiAgICAgIC8vIEV4dHJhY3QgbWF0Y2ggVVJMIGFuZCBJRFxuICAgICAgY29uc3QgbWF0Y2hVcmwgPSAkY29udGFpbmVyLmF0dHIoJ2hyZWYnKTtcbiAgICAgIGlmICghbWF0Y2hVcmwpIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCBmdWxsTWF0Y2hVcmwgPSBtYXRjaFVybC5zdGFydHNXaXRoKCdodHRwJykgPyBtYXRjaFVybCA6IGAke3RoaXMuYmFzZVVybH0ke21hdGNoVXJsfWA7XG4gICAgICBjb25zdCB2bHJNYXRjaElkID0gdGhpcy5leHRyYWN0TWF0Y2hJZEZyb21VcmwoZnVsbE1hdGNoVXJsKTtcbiAgICAgIGlmICghdmxyTWF0Y2hJZCkgcmV0dXJuIG51bGw7XG5cbiAgICAgIC8vIEV4dHJhY3QgdGVhbSBuYW1lc1xuICAgICAgY29uc3QgdGVhbUVsZW1lbnRzID0gJGNvbnRhaW5lci5maW5kKCcubWF0Y2gtaXRlbS12cy10ZWFtLW5hbWUsIC50ZWFtLW5hbWUsIC50ZXh0LW9mJykudG9BcnJheSgpO1xuICAgICAgbGV0IHRlYW0xTmFtZSA9ICcnO1xuICAgICAgbGV0IHRlYW0yTmFtZSA9ICcnO1xuXG4gICAgICBpZiAodGVhbUVsZW1lbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHRlYW0xTmFtZSA9ICQodGVhbUVsZW1lbnRzWzBdKS50ZXh0KCkudHJpbSgpO1xuICAgICAgICB0ZWFtMk5hbWUgPSAkKHRlYW1FbGVtZW50c1sxXSkudGV4dCgpLnRyaW0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFsdGVybmF0aXZlIHNlbGVjdG9ycyBmb3IgdGVhbSBuYW1lc1xuICAgICAgICBjb25zdCBhbGxUZWFtVGV4dCA9ICRjb250YWluZXIuZmluZCgnW2NsYXNzKj1cInRlYW1cIl0sIFtjbGFzcyo9XCJ2c1wiXScpLm1hcCgoaSwgZWwpID0+ICQoZWwpLnRleHQoKS50cmltKCkpLmdldCgpO1xuICAgICAgICBjb25zdCB2YWxpZFRlYW1zID0gYWxsVGVhbVRleHQuZmlsdGVyKHRleHQgPT4gdGV4dCAmJiB0ZXh0ICE9PSAndnMnICYmIHRleHQgIT09ICfigJMnICYmIHRleHQgIT09ICctJyk7XG4gICAgICAgIGlmICh2YWxpZFRlYW1zLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgdGVhbTFOYW1lID0gdmFsaWRUZWFtc1swXTtcbiAgICAgICAgICB0ZWFtMk5hbWUgPSB2YWxpZFRlYW1zWzFdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEV4dHJhY3Qgc2NvcmVzXG4gICAgICBjb25zdCBzY29yZUVsZW1lbnRzID0gJGNvbnRhaW5lci5maW5kKCcubWF0Y2gtaXRlbS12cy10ZWFtLXNjb3JlLCAuc2NvcmUsIFtjbGFzcyo9XCJzY29yZVwiXScpLnRvQXJyYXkoKTtcbiAgICAgIGxldCB0ZWFtMVNjb3JlID0gMDtcbiAgICAgIGxldCB0ZWFtMlNjb3JlID0gMDtcblxuICAgICAgaWYgKHNjb3JlRWxlbWVudHMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgY29uc3Qgc2NvcmUxVGV4dCA9ICQoc2NvcmVFbGVtZW50c1swXSkudGV4dCgpLnRyaW0oKTtcbiAgICAgICAgY29uc3Qgc2NvcmUyVGV4dCA9ICQoc2NvcmVFbGVtZW50c1sxXSkudGV4dCgpLnRyaW0oKTtcbiAgICAgICAgXG4gICAgICAgIHRlYW0xU2NvcmUgPSBzY29yZTFUZXh0ICYmICFpc05hTihwYXJzZUludChzY29yZTFUZXh0KSkgPyBwYXJzZUludChzY29yZTFUZXh0KSA6IDA7XG4gICAgICAgIHRlYW0yU2NvcmUgPSBzY29yZTJUZXh0ICYmICFpc05hTihwYXJzZUludChzY29yZTJUZXh0KSkgPyBwYXJzZUludChzY29yZTJUZXh0KSA6IDA7XG4gICAgICB9XG5cbiAgICAgIC8vIERldGVybWluZSBzdGF0dXNcbiAgICAgIGxldCBzdGF0dXM6ICd1cGNvbWluZycgfCAnbGl2ZScgfCAnY29tcGxldGVkJyA9ICd1cGNvbWluZyc7XG4gICAgICBjb25zdCBzdGF0dXNUZXh0ID0gJGNvbnRhaW5lci5maW5kKCcubWF0Y2gtaXRlbS10aW1lLCAudGltZSwgW2NsYXNzKj1cInRpbWVcIl0sIFtjbGFzcyo9XCJsaXZlXCJdJykudGV4dCgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBcbiAgICAgIGlmIChzdGF0dXNUZXh0LmluY2x1ZGVzKCdsaXZlJykpIHtcbiAgICAgICAgc3RhdHVzID0gJ2xpdmUnO1xuICAgICAgfSBlbHNlIGlmICh0ZWFtMVNjb3JlID4gMCB8fCB0ZWFtMlNjb3JlID4gMCkge1xuICAgICAgICBzdGF0dXMgPSAnY29tcGxldGVkJztcbiAgICAgIH1cblxuICAgICAgLy8gRXh0cmFjdCB0b3VybmFtZW50IGluZm9cbiAgICAgIGNvbnN0IHRvdXJuYW1lbnRFbGVtZW50ID0gJGNvbnRhaW5lci5maW5kKCcubWF0Y2gtaXRlbS1ldmVudCwgLmV2ZW50LCBbY2xhc3MqPVwiZXZlbnRcIl0sIC50b3VybmFtZW50JykuZmlyc3QoKTtcbiAgICAgIGNvbnN0IHRvdXJuYW1lbnROYW1lID0gdG91cm5hbWVudEVsZW1lbnQudGV4dCgpLnRyaW0oKSB8fCAnVW5rbm93biBUb3VybmFtZW50JztcblxuICAgICAgLy8gRXh0cmFjdCBzdGFnZS9zZXJpZXMgaW5mb1xuICAgICAgY29uc3Qgc3RhZ2VFbGVtZW50ID0gJGNvbnRhaW5lci5maW5kKCcubWF0Y2gtaXRlbS1ldmVudC1zZXJpZXMsIC5zZXJpZXMsIFtjbGFzcyo9XCJzZXJpZXNcIl0nKS5maXJzdCgpO1xuICAgICAgY29uc3Qgc3RhZ2UgPSBzdGFnZUVsZW1lbnQudGV4dCgpLnRyaW0oKTtcblxuICAgICAgLy8gRXh0cmFjdCB0aW1lXG4gICAgICBjb25zdCB0aW1lRWxlbWVudCA9ICRjb250YWluZXIuZmluZCgnLm1hdGNoLWl0ZW0tdGltZSwgLnRpbWUnKS5maXJzdCgpO1xuICAgICAgY29uc3QgdGltZVRleHQgPSB0aW1lRWxlbWVudC50ZXh0KCkudHJpbSgpO1xuICAgICAgY29uc3QgbWF0Y2hUaW1lID0gdGhpcy5wYXJzZVRpbWVTdHJpbmcodGltZVRleHQpO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgbWF0Y2ggZm9ybWF0IChkZWZhdWx0IHRvIEJvMylcbiAgICAgIGxldCBtYXRjaEZvcm1hdCA9ICdCbzMnO1xuICAgICAgY29uc3QgZm9ybWF0VGV4dCA9ICRjb250YWluZXIudGV4dCgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoZm9ybWF0VGV4dC5pbmNsdWRlcygnYm8xJykpIHtcbiAgICAgICAgbWF0Y2hGb3JtYXQgPSAnQm8xJztcbiAgICAgIH0gZWxzZSBpZiAoZm9ybWF0VGV4dC5pbmNsdWRlcygnYm81JykpIHtcbiAgICAgICAgbWF0Y2hGb3JtYXQgPSAnQm81JztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmxyX21hdGNoX2lkOiB2bHJNYXRjaElkLFxuICAgICAgICB0ZWFtMV9uYW1lOiB0ZWFtMU5hbWUgfHwgdW5kZWZpbmVkLFxuICAgICAgICB0ZWFtMl9uYW1lOiB0ZWFtMk5hbWUgfHwgdW5kZWZpbmVkLFxuICAgICAgICB0ZWFtMV9zY29yZTogdGVhbTFTY29yZSxcbiAgICAgICAgdGVhbTJfc2NvcmU6IHRlYW0yU2NvcmUsXG4gICAgICAgIHRvdXJuYW1lbnRfbmFtZTogdG91cm5hbWVudE5hbWUsXG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgbWF0Y2hfdGltZTogbWF0Y2hUaW1lLFxuICAgICAgICBtYXRjaF9mb3JtYXQ6IG1hdGNoRm9ybWF0LFxuICAgICAgICBzdGFnZTogc3RhZ2UgfHwgdW5kZWZpbmVkLFxuICAgICAgICBtYXRjaF91cmw6IGZ1bGxNYXRjaFVybFxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIG1hdGNoIGNvbnRhaW5lcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2NyYXBlTWF0Y2hEZXRhaWxzKHZsck1hdGNoSWQ6IHN0cmluZyk6IFByb21pc2U8TWF0Y2hEZXRhaWxTY3JhcGVEYXRhIHwgbnVsbD4ge1xuICAgIC8vIEZpcnN0LCBnZXQgdGhlIG1hdGNoIGZyb20gZGF0YWJhc2UgdG8gZ2V0IGl0cyBVUkxcbiAgICBjb25zdCBtYXRjaGVzID0gdGhpcy5kYi5nZXRNYXRjaGVzKCdhbGwnLCAxMDAwLCAwKTtcbiAgICBjb25zdCBleGlzdGluZ01hdGNoID0gbWF0Y2hlcy5tYXRjaGVzLmZpbmQobSA9PiBtLnZscl9tYXRjaF9pZCA9PT0gdmxyTWF0Y2hJZCk7XG4gICAgXG4gICAgaWYgKCFleGlzdGluZ01hdGNoPy5tYXRjaF91cmwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYE5vIG1hdGNoIFVSTCBmb3VuZCBmb3IgVkxSIG1hdGNoIElEOiAke3Zsck1hdGNoSWR9YCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgU2NyYXBpbmcgZGV0YWlsZWQgbWF0Y2ggZGF0YSBmcm9tOiAke2V4aXN0aW5nTWF0Y2gubWF0Y2hfdXJsfWApO1xuXG4gICAgY29uc3QgJCA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoZXhpc3RpbmdNYXRjaC5tYXRjaF91cmwpO1xuICAgIGlmICghJCkge1xuICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGZldGNoIG1hdGNoIGRldGFpbHMgcGFnZTogJHtleGlzdGluZ01hdGNoLm1hdGNoX3VybH1gKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBFeHRyYWN0IGRldGFpbGVkIG1hdGNoIGluZm9ybWF0aW9uXG4gICAgICBjb25zdCBtYXBzRGF0YTogTWFwRGF0YVtdID0gW107XG4gICAgICBjb25zdCBwbGF5ZXJTdGF0czogUGxheWVyU3RhdHNbXSA9IFtdO1xuXG4gICAgICAvLyBQYXJzZSBtYXAgcmVzdWx0c1xuICAgICAgY29uc3QgbWFwQ29udGFpbmVycyA9ICQoJy52bS1zdGF0cy1nYW1lLCAubWFwLXJlc3VsdCwgW2NsYXNzKj1cIm1hcFwiXScpLnRvQXJyYXkoKTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBtYXBDb250YWluZXIgb2YgbWFwQ29udGFpbmVycykge1xuICAgICAgICBjb25zdCBtYXBEYXRhID0gdGhpcy5wYXJzZU1hcERhdGEoJCwgbWFwQ29udGFpbmVyKTtcbiAgICAgICAgaWYgKG1hcERhdGEpIHtcbiAgICAgICAgICBtYXBzRGF0YS5wdXNoKG1hcERhdGEpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFBhcnNlIHBsYXllciBzdGF0aXN0aWNzXG4gICAgICBjb25zdCBwbGF5ZXJSb3dzID0gJCgnLnZtLXN0YXRzLWdhbWUtcGxheWVyLCAucGxheWVyLXN0YXRzLXJvdywgW2NsYXNzKj1cInBsYXllclwiXScpLnRvQXJyYXkoKTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBwbGF5ZXJSb3cgb2YgcGxheWVyUm93cykge1xuICAgICAgICBjb25zdCBwbGF5ZXJEYXRhID0gdGhpcy5wYXJzZVBsYXllclN0YXRzKCQsIHBsYXllclJvdyk7XG4gICAgICAgIGlmIChwbGF5ZXJEYXRhKSB7XG4gICAgICAgICAgcGxheWVyU3RhdHMucHVzaChwbGF5ZXJEYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBFeHRyYWN0IFZPRCBhbmQgc3RhdHMgVVJMc1xuICAgICAgY29uc3Qgdm9kVXJsID0gJCgnYVtocmVmKj1cInlvdXR1YmVcIl0sIGFbaHJlZio9XCJ0d2l0Y2hcIl0sIC52b2QtbGluaycpLmF0dHIoJ2hyZWYnKTtcbiAgICAgIGNvbnN0IHN0YXRzVXJsID0gJCgnYVtocmVmKj1cInN0YXRzXCJdLCAuc3RhdHMtbGluaycpLmF0dHIoJ2hyZWYnKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmxyX21hdGNoX2lkOiB2bHJNYXRjaElkLFxuICAgICAgICB0ZWFtMV9uYW1lOiBleGlzdGluZ01hdGNoLnRlYW0xPy5uYW1lLFxuICAgICAgICB0ZWFtMl9uYW1lOiBleGlzdGluZ01hdGNoLnRlYW0yPy5uYW1lLFxuICAgICAgICB0ZWFtMV9zY29yZTogZXhpc3RpbmdNYXRjaC50ZWFtMV9zY29yZSxcbiAgICAgICAgdGVhbTJfc2NvcmU6IGV4aXN0aW5nTWF0Y2gudGVhbTJfc2NvcmUsXG4gICAgICAgIHRvdXJuYW1lbnRfbmFtZTogZXhpc3RpbmdNYXRjaC50b3VybmFtZW50Py5uYW1lLFxuICAgICAgICBzdGF0dXM6IGV4aXN0aW5nTWF0Y2guc3RhdHVzLFxuICAgICAgICBtYXRjaF90aW1lOiBleGlzdGluZ01hdGNoLm1hdGNoX3RpbWUsXG4gICAgICAgIG1hdGNoX2Zvcm1hdDogZXhpc3RpbmdNYXRjaC5tYXRjaF9mb3JtYXQsXG4gICAgICAgIHN0YWdlOiBleGlzdGluZ01hdGNoLnN0YWdlLFxuICAgICAgICBtYXRjaF91cmw6IGV4aXN0aW5nTWF0Y2gubWF0Y2hfdXJsLFxuICAgICAgICBtYXBzX2RhdGE6IG1hcHNEYXRhLmxlbmd0aCA+IDAgPyBtYXBzRGF0YSA6IHVuZGVmaW5lZCxcbiAgICAgICAgcGxheWVyX3N0YXRzOiBwbGF5ZXJTdGF0cy5sZW5ndGggPiAwID8gcGxheWVyU3RhdHMgOiB1bmRlZmluZWQsXG4gICAgICAgIHZvZF91cmw6IHZvZFVybCA/ICh2b2RVcmwuc3RhcnRzV2l0aCgnaHR0cCcpID8gdm9kVXJsIDogYCR7dGhpcy5iYXNlVXJsfSR7dm9kVXJsfWApIDogdW5kZWZpbmVkLFxuICAgICAgICBzdGF0c191cmw6IHN0YXRzVXJsID8gKHN0YXRzVXJsLnN0YXJ0c1dpdGgoJ2h0dHAnKSA/IHN0YXRzVXJsIDogYCR7dGhpcy5iYXNlVXJsfSR7c3RhdHNVcmx9YCkgOiB1bmRlZmluZWRcbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igc2NyYXBpbmcgbWF0Y2ggZGV0YWlscyBmb3IgJHt2bHJNYXRjaElkfTpgLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHBhcnNlTWFwRGF0YSgkOiBjaGVlcmlvLkNoZWVyaW9BUEksIG1hcENvbnRhaW5lcjogY2hlZXJpby5FbGVtZW50KTogTWFwRGF0YSB8IG51bGwge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCAkbWFwID0gJChtYXBDb250YWluZXIpO1xuXG4gICAgICAvLyBFeHRyYWN0IG1hcCBuYW1lXG4gICAgICBjb25zdCBtYXBOYW1lRWxlbWVudCA9ICRtYXAuZmluZCgnLm1hcC1uYW1lLCAudm0tc3RhdHMtZ2FtZS1oZWFkZXItbWFwLCBbY2xhc3MqPVwibWFwXCJdJykuZmlyc3QoKTtcbiAgICAgIGxldCBtYXBOYW1lID0gbWFwTmFtZUVsZW1lbnQudGV4dCgpLnRyaW0oKTtcbiAgICAgIFxuICAgICAgLy8gQ2xlYW4gdXAgbWFwIG5hbWUgLSByZW1vdmUgd2hpdGVzcGFjZSwgdGFicywgbmV3bGluZXMsIGFuZCBleHRyYSB0ZXh0XG4gICAgICBpZiAobWFwTmFtZSkge1xuICAgICAgICAvLyBSZW1vdmUgYWxsIHdoaXRlc3BhY2UsIHRhYnMsIGFuZCBuZXdsaW5lc1xuICAgICAgICBtYXBOYW1lID0gbWFwTmFtZS5yZXBsYWNlKC9bXFx0XFxuXFxyXFxzXSsvZywgJyAnKS50cmltKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgY29tbW9uIFZMUi5nZyBhcnRpZmFjdHMgbGlrZSBcIlBJQ0tcIiwgXCJCQU5cIiwgdGltZXN0YW1wcywgZXRjLlxuICAgICAgICBtYXBOYW1lID0gbWFwTmFtZS5yZXBsYWNlKC9cXGIoUElDS3xCQU58REVDSURFUilcXGIvZ2ksICcnKS50cmltKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgdGltZXN0YW1wcyAocGF0dGVybnMgbGlrZSBcIjE2OjMwXCIsIFwiNDc6MjFcIiwgZXRjLilcbiAgICAgICAgbWFwTmFtZSA9IG1hcE5hbWUucmVwbGFjZSgvXFxiXFxkezEsMn06XFxkezJ9XFxiL2csICcnKS50cmltKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBFeHRyYWN0IGp1c3QgdGhlIG1hcCBuYW1lIChmaXJzdCB3b3JkIHNob3VsZCBiZSB0aGUgYWN0dWFsIG1hcClcbiAgICAgICAgY29uc3QgbWFwV29yZHMgPSBtYXBOYW1lLnNwbGl0KC9cXHMrLyk7XG4gICAgICAgIGNvbnN0IHZhbGlkTWFwcyA9IFsnQmluZCcsICdIYXZlbicsICdTcGxpdCcsICdBc2NlbnQnLCAnRHVzdDInLCAnSW5mZXJubycsICdNaXJhZ2UnLCAnQ2FjaGUnLCAnT3ZlcnBhc3MnLCAnVmVydGlnbycsICdOdWtlJywgJ1RyYWluJywgJ0NvYmJsZXN0b25lJywgJ0ljZWJveCcsICdCcmVlemUnLCAnRnJhY3R1cmUnLCAnUGVhcmwnLCAnTG90dXMnLCAnU3Vuc2V0JywgJ0FieXNzJ107XG4gICAgICAgIFxuICAgICAgICAvLyBGaW5kIHRoZSBmaXJzdCB2YWxpZCBtYXAgbmFtZSBpbiB0aGUgdGV4dFxuICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2YgbWFwV29yZHMpIHtcbiAgICAgICAgICBjb25zdCBjbGVhbldvcmQgPSB3b3JkLnJlcGxhY2UoL1teXFx3XS9nLCAnJyk7XG4gICAgICAgICAgY29uc3QgZm91bmRNYXAgPSB2YWxpZE1hcHMuZmluZChtYXAgPT4gbWFwLnRvTG93ZXJDYXNlKCkgPT09IGNsZWFuV29yZC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICBpZiAoZm91bmRNYXApIHtcbiAgICAgICAgICAgIG1hcE5hbWUgPSBmb3VuZE1hcDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgbm8gdmFsaWQgbWFwIGZvdW5kIGJ1dCB3ZSBoYXZlIHRleHQsIHRha2UgdGhlIGZpcnN0IG1lYW5pbmdmdWwgd29yZFxuICAgICAgICBpZiAoIXZhbGlkTWFwcy5zb21lKG1hcCA9PiBtYXAudG9Mb3dlckNhc2UoKSA9PT0gbWFwTmFtZS50b0xvd2VyQ2FzZSgpKSAmJiBtYXBXb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbWFwTmFtZSA9IG1hcFdvcmRzWzBdLnJlcGxhY2UoL1teXFx3XS9nLCAnJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRXh0cmFjdCBtYXAgc2NvcmVzXG4gICAgICBjb25zdCBzY29yZUVsZW1lbnRzID0gJG1hcC5maW5kKCcuc2NvcmUsIC52bS1zdGF0cy1nYW1lLWhlYWRlci1zY29yZSwgW2NsYXNzKj1cInNjb3JlXCJdJykudG9BcnJheSgpO1xuICAgICAgbGV0IHRlYW0xU2NvcmUgPSAwO1xuICAgICAgbGV0IHRlYW0yU2NvcmUgPSAwO1xuXG4gICAgICBpZiAoc2NvcmVFbGVtZW50cy5sZW5ndGggPj0gMikge1xuICAgICAgICBjb25zdCBzY29yZTEgPSAkKHNjb3JlRWxlbWVudHNbMF0pLnRleHQoKS50cmltKCk7XG4gICAgICAgIGNvbnN0IHNjb3JlMiA9ICQoc2NvcmVFbGVtZW50c1sxXSkudGV4dCgpLnRyaW0oKTtcbiAgICAgICAgXG4gICAgICAgIHRlYW0xU2NvcmUgPSAhaXNOYU4ocGFyc2VJbnQoc2NvcmUxKSkgPyBwYXJzZUludChzY29yZTEpIDogMDtcbiAgICAgICAgdGVhbTJTY29yZSA9ICFpc05hTihwYXJzZUludChzY29yZTIpKSA/IHBhcnNlSW50KHNjb3JlMikgOiAwO1xuICAgICAgfVxuXG4gICAgICAvLyBFeHRyYWN0IGFnZW50IHBpY2tzXG4gICAgICBjb25zdCBhZ2VudHM6IHN0cmluZ1tdID0gW107XG4gICAgICBjb25zdCBhZ2VudEVsZW1lbnRzID0gJG1hcC5maW5kKCdpbWdbc3JjKj1cImFnZW50XCJdLCAuYWdlbnQtaWNvbiwgW2NsYXNzKj1cImFnZW50XCJdJykudG9BcnJheSgpO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IGFnZW50RWwgb2YgYWdlbnRFbGVtZW50cykge1xuICAgICAgICBjb25zdCBhZ2VudFNyYyA9ICQoYWdlbnRFbCkuYXR0cignc3JjJykgfHwgJyc7XG4gICAgICAgIGlmIChhZ2VudFNyYykge1xuICAgICAgICAgIC8vIEV4dHJhY3QgYWdlbnQgbmFtZSBmcm9tIGltYWdlIHBhdGhcbiAgICAgICAgICBjb25zdCBhZ2VudE5hbWUgPSBhZ2VudFNyYy5zcGxpdCgnLycpLnBvcCgpPy5zcGxpdCgnLicpWzBdIHx8ICcnO1xuICAgICAgICAgIGlmIChhZ2VudE5hbWUpIHtcbiAgICAgICAgICAgIGFnZW50cy5wdXNoKGFnZW50TmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghbWFwTmFtZSAmJiB0ZWFtMVNjb3JlID09PSAwICYmIHRlYW0yU2NvcmUgPT09IDAgJiYgYWdlbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbWFwX25hbWU6IG1hcE5hbWUgfHwgJ1Vua25vd24gTWFwJyxcbiAgICAgICAgdGVhbTFfc2NvcmU6IHRlYW0xU2NvcmUsXG4gICAgICAgIHRlYW0yX3Njb3JlOiB0ZWFtMlNjb3JlLFxuICAgICAgICBhZ2VudHNcbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBtYXAgZGF0YTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHBhcnNlUGxheWVyU3RhdHMoJDogY2hlZXJpby5DaGVlcmlvQVBJLCBwbGF5ZXJSb3c6IGNoZWVyaW8uRWxlbWVudCk6IFBsYXllclN0YXRzIHwgbnVsbCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0ICRyb3cgPSAkKHBsYXllclJvdyk7XG5cbiAgICAgIC8vIEV4dHJhY3QgcGxheWVyIG5hbWVcbiAgICAgIGNvbnN0IG5hbWVFbGVtZW50ID0gJHJvdy5maW5kKCcucGxheWVyLW5hbWUsIC52bS1zdGF0cy1nYW1lLXBsYXllci1uYW1lLCBbY2xhc3MqPVwibmFtZVwiXScpLmZpcnN0KCk7XG4gICAgICBjb25zdCBwbGF5ZXJOYW1lID0gbmFtZUVsZW1lbnQudGV4dCgpLnRyaW0oKTtcblxuICAgICAgaWYgKCFwbGF5ZXJOYW1lKSByZXR1cm4gbnVsbDtcblxuICAgICAgLy8gRXh0cmFjdCBhZ2VudFxuICAgICAgY29uc3QgYWdlbnRFbGVtZW50ID0gJHJvdy5maW5kKCdpbWdbc3JjKj1cImFnZW50XCJdLCAuYWdlbnQnKS5maXJzdCgpO1xuICAgICAgY29uc3QgYWdlbnRTcmMgPSBhZ2VudEVsZW1lbnQuYXR0cignc3JjJykgfHwgJyc7XG4gICAgICBjb25zdCBhZ2VudCA9IGFnZW50U3JjID8gYWdlbnRTcmMuc3BsaXQoJy8nKS5wb3AoKT8uc3BsaXQoJy4nKVswXSB8fCAnJyA6ICcnO1xuXG4gICAgICAvLyBFeHRyYWN0IHN0YXRzIChraWxscywgZGVhdGhzLCBhc3Npc3RzLCBldGMuKVxuICAgICAgY29uc3Qgc3RhdEVsZW1lbnRzID0gJHJvdy5maW5kKCcuc3RhdCwgLnZtLXN0YXRzLWdhbWUtcGxheWVyLXN0YXQsIFtjbGFzcyo9XCJzdGF0XCJdJykudG9BcnJheSgpO1xuICAgICAgXG4gICAgICAvLyBEZWZhdWx0IHN0YXRzXG4gICAgICBsZXQga2lsbHMgPSAwO1xuICAgICAgbGV0IGRlYXRocyA9IDA7XG4gICAgICBsZXQgYXNzaXN0cyA9IDA7XG4gICAgICBsZXQgYWNzID0gMDtcbiAgICAgIGxldCBrZCA9IDA7XG4gICAgICBsZXQgYWRyID0gMDtcbiAgICAgIGxldCBoc1BlcmNlbnQgPSAwO1xuICAgICAgbGV0IGZrID0gMDtcbiAgICAgIGxldCBmZCA9IDA7XG5cbiAgICAgIC8vIFRyeSB0byBleHRyYWN0IHN0YXRzIGZyb20gdmFyaW91cyBzZWxlY3RvcnNcbiAgICAgIGNvbnN0IHN0YXRzVGV4dCA9ICRyb3cudGV4dCgpO1xuICAgICAgY29uc3Qgc3RhdE51bWJlcnMgPSBzdGF0c1RleHQubWF0Y2goL1xcZCsvZykgfHwgW107XG4gICAgICBcbiAgICAgIGlmIChzdGF0TnVtYmVycy5sZW5ndGggPj0gMykge1xuICAgICAgICBraWxscyA9IHBhcnNlSW50KHN0YXROdW1iZXJzWzBdKSB8fCAwO1xuICAgICAgICBkZWF0aHMgPSBwYXJzZUludChzdGF0TnVtYmVyc1sxXSkgfHwgMDtcbiAgICAgICAgYXNzaXN0cyA9IHBhcnNlSW50KHN0YXROdW1iZXJzWzJdKSB8fCAwO1xuICAgICAgICBcbiAgICAgICAgaWYgKHN0YXROdW1iZXJzLmxlbmd0aCA+PSA0KSBhY3MgPSBwYXJzZUludChzdGF0TnVtYmVyc1szXSkgfHwgMDtcbiAgICAgICAgaWYgKHN0YXROdW1iZXJzLmxlbmd0aCA+PSA2KSBhZHIgPSBwYXJzZUludChzdGF0TnVtYmVyc1s1XSkgfHwgMDtcbiAgICAgIH1cblxuICAgICAgLy8gQ2FsY3VsYXRlIEsvRCByYXRpb1xuICAgICAga2QgPSBkZWF0aHMgPiAwID8ga2lsbHMgLyBkZWF0aHMgOiBraWxscztcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGxheWVyX25hbWU6IHBsYXllck5hbWUsXG4gICAgICAgIHRlYW06ICd0ZWFtMScsIC8vIFRoaXMgd291bGQgbmVlZCBtb3JlIGNvbnRleHQgdG8gZGV0ZXJtaW5lIGNvcnJlY3RseVxuICAgICAgICBhZ2VudCxcbiAgICAgICAga2lsbHMsXG4gICAgICAgIGRlYXRocyxcbiAgICAgICAgYXNzaXN0cyxcbiAgICAgICAgYWNzLFxuICAgICAgICBrX2RfcmF0aW86IE1hdGgucm91bmQoa2QgKiAxMDApIC8gMTAwLFxuICAgICAgICBhZHIsXG4gICAgICAgIGhlYWRzaG90X3BlcmNlbnRhZ2U6IGhzUGVyY2VudCxcbiAgICAgICAgZmlyc3Rfa2lsbHM6IGZrLFxuICAgICAgICBmaXJzdF9kZWF0aHM6IGZkLFxuICAgICAgICBtYXBzX3BsYXllZDogMVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIHBsYXllciBzdGF0czonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2NyYXBlQWxsTWF0Y2hlcygpOiBQcm9taXNlPFNjcmFwZVJlc3BvbnNlPiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IG1hdGNoZXNTY3JhcGVkID0gMDtcbiAgICBsZXQgbWF0Y2hlc1VwZGF0ZWQgPSAwO1xuICAgIGxldCBuZXdUZWFtcyA9IDA7XG4gICAgbGV0IG5ld1RvdXJuYW1lbnRzID0gMDtcblxuICAgIHRyeSB7XG4gICAgICAvLyBMb2cgc3RhcnQgb2Ygc2NyYXBpbmdcbiAgICAgIHRoaXMuZGIubG9nU2NyYXBpbmcoJ2Z1bGxfc2NyYXBlJywgYCR7dGhpcy5iYXNlVXJsfS9tYXRjaGVzYCwgJ2luX3Byb2dyZXNzJyk7XG5cbiAgICAgIC8vIFNjcmFwZSB1cGNvbWluZyBtYXRjaGVzXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGNvbWluZ01hdGNoZXMgPSBhd2FpdCB0aGlzLnNjcmFwZU1hdGNoZXNMaXN0KCcnKTtcbiAgICAgICAgZm9yIChjb25zdCBtYXRjaERhdGEgb2YgdXBjb21pbmdNYXRjaGVzKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nTWF0Y2ggPSB0aGlzLmRiLmdldE1hdGNoZXMoJ2FsbCcsIDEwMDAsIDApLm1hdGNoZXMuZmluZChtID0+IG0udmxyX21hdGNoX2lkID09PSBtYXRjaERhdGEudmxyX21hdGNoX2lkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5kYi5zYXZlTWF0Y2gobWF0Y2hEYXRhKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nTWF0Y2gpIHtcbiAgICAgICAgICAgICAgbWF0Y2hlc1VwZGF0ZWQrKztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG1hdGNoZXNTY3JhcGVkKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGBFcnJvciBzYXZpbmcgdXBjb21pbmcgbWF0Y2ggJHttYXRjaERhdGEudmxyX21hdGNoX2lkfTogJHtlcnJvcn1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBFcnJvciBzY3JhcGluZyB1cGNvbWluZyBtYXRjaGVzOiAke2Vycm9yfWApO1xuICAgICAgfVxuXG4gICAgICAvLyBTY3JhcGUgY29tcGxldGVkIG1hdGNoZXNcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZE1hdGNoZXMgPSBhd2FpdCB0aGlzLnNjcmFwZU1hdGNoZXNMaXN0KCdyZXN1bHRzJyk7XG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2hEYXRhIG9mIGNvbXBsZXRlZE1hdGNoZXMpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdNYXRjaCA9IHRoaXMuZGIuZ2V0TWF0Y2hlcygnYWxsJywgMTAwMCwgMCkubWF0Y2hlcy5maW5kKG0gPT4gbS52bHJfbWF0Y2hfaWQgPT09IG1hdGNoRGF0YS52bHJfbWF0Y2hfaWQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmRiLnNhdmVNYXRjaChtYXRjaERhdGEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdNYXRjaCkge1xuICAgICAgICAgICAgICBtYXRjaGVzVXBkYXRlZCsrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbWF0Y2hlc1NjcmFwZWQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goYEVycm9yIHNhdmluZyBjb21wbGV0ZWQgbWF0Y2ggJHttYXRjaERhdGEudmxyX21hdGNoX2lkfTogJHtlcnJvcn1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBFcnJvciBzY3JhcGluZyBjb21wbGV0ZWQgbWF0Y2hlczogJHtlcnJvcn1gKTtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHVwZGF0ZWQgc3RhdHNcbiAgICAgIGNvbnN0IHN0YXRzID0gdGhpcy5kYi5nZXRTdGF0cygpO1xuICAgICAgbmV3VGVhbXMgPSBzdGF0cy50b3RhbF90ZWFtcztcbiAgICAgIG5ld1RvdXJuYW1lbnRzID0gc3RhdHMudG90YWxfdG91cm5hbWVudHM7XG5cbiAgICAgIC8vIExvZyBzdWNjZXNzZnVsIGNvbXBsZXRpb25cbiAgICAgIHRoaXMuZGIubG9nU2NyYXBpbmcoJ2Z1bGxfc2NyYXBlJywgYCR7dGhpcy5iYXNlVXJsfS9tYXRjaGVzYCwgJ3N1Y2Nlc3MnLCB1bmRlZmluZWQsIG1hdGNoZXNTY3JhcGVkICsgbWF0Y2hlc1VwZGF0ZWQpO1xuXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1hdGNoZXNfc2NyYXBlZDogbWF0Y2hlc1NjcmFwZWQsXG4gICAgICAgIG1hdGNoZXNfdXBkYXRlZDogbWF0Y2hlc1VwZGF0ZWQsXG4gICAgICAgIG5ld190ZWFtczogbmV3VGVhbXMsXG4gICAgICAgIG5ld190b3VybmFtZW50czogbmV3VG91cm5hbWVudHMsXG4gICAgICAgIGVycm9ycyxcbiAgICAgICAgZHVyYXRpb25fbXM6IGR1cmF0aW9uXG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIExvZyBlcnJvclxuICAgICAgdGhpcy5kYi5sb2dTY3JhcGluZygnZnVsbF9zY3JhcGUnLCBgJHt0aGlzLmJhc2VVcmx9L21hdGNoZXNgLCAnZXJyb3InLCBTdHJpbmcoZXJyb3IpKTtcbiAgICAgIFxuICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWF0Y2hlc19zY3JhcGVkOiBtYXRjaGVzU2NyYXBlZCxcbiAgICAgICAgbWF0Y2hlc191cGRhdGVkOiBtYXRjaGVzVXBkYXRlZCxcbiAgICAgICAgbmV3X3RlYW1zOiBuZXdUZWFtcyxcbiAgICAgICAgbmV3X3RvdXJuYW1lbnRzOiBuZXdUb3VybmFtZW50cyxcbiAgICAgICAgZXJyb3JzOiBbLi4uZXJyb3JzLCBgQ3JpdGljYWwgZXJyb3I6ICR7ZXJyb3J9YF0sXG4gICAgICAgIGR1cmF0aW9uX21zOiBkdXJhdGlvblxuICAgICAgfTtcbiAgICB9XG4gIH1cbn0iXSwibmFtZXMiOlsiYXhpb3MiLCJjaGVlcmlvIiwiRGF0YWJhc2VTZXJ2aWNlIiwiVkxSU2NyYXBlciIsImNvbnN0cnVjdG9yIiwiYmFzZVVybCIsInJhdGVMaW1pdE1zIiwiZGIiLCJkZWxheSIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwibWFrZVJlcXVlc3QiLCJ1cmwiLCJyZXNwb25zZSIsImdldCIsImhlYWRlcnMiLCJ0aW1lb3V0IiwibG9hZCIsImRhdGEiLCJlcnJvciIsImNvbnNvbGUiLCJwYXJzZVRpbWVTdHJpbmciLCJ0aW1lU3RyIiwidW5kZWZpbmVkIiwiY2xlYW5UaW1lIiwidHJpbSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJEYXRlIiwidG9JU09TdHJpbmciLCJub3ciLCJ0b3RhbE1pbnV0ZXMiLCJkYXlNYXRjaCIsIm1hdGNoIiwicGFyc2VJbnQiLCJob3VyTWF0Y2giLCJtaW51dGVNYXRjaCIsImZ1dHVyZVRpbWUiLCJnZXRUaW1lIiwiZXh0cmFjdE1hdGNoSWRGcm9tVXJsIiwic2NyYXBlTWF0Y2hlc0xpc3QiLCJtYXRjaGVzVHlwZSIsImxvZyIsIiQiLCJFcnJvciIsIm1hdGNoZXMiLCJtYXRjaENvbnRhaW5lcnMiLCJ0b0FycmF5IiwiY29udGFpbmVyIiwibWF0Y2hEYXRhIiwicGFyc2VNYXRjaENvbnRhaW5lciIsInB1c2giLCJsZW5ndGgiLCIkY29udGFpbmVyIiwibWF0Y2hVcmwiLCJhdHRyIiwiZnVsbE1hdGNoVXJsIiwic3RhcnRzV2l0aCIsInZsck1hdGNoSWQiLCJ0ZWFtRWxlbWVudHMiLCJmaW5kIiwidGVhbTFOYW1lIiwidGVhbTJOYW1lIiwidGV4dCIsImFsbFRlYW1UZXh0IiwibWFwIiwiaSIsImVsIiwidmFsaWRUZWFtcyIsImZpbHRlciIsInNjb3JlRWxlbWVudHMiLCJ0ZWFtMVNjb3JlIiwidGVhbTJTY29yZSIsInNjb3JlMVRleHQiLCJzY29yZTJUZXh0IiwiaXNOYU4iLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwidG91cm5hbWVudEVsZW1lbnQiLCJmaXJzdCIsInRvdXJuYW1lbnROYW1lIiwic3RhZ2VFbGVtZW50Iiwic3RhZ2UiLCJ0aW1lRWxlbWVudCIsInRpbWVUZXh0IiwibWF0Y2hUaW1lIiwibWF0Y2hGb3JtYXQiLCJmb3JtYXRUZXh0IiwidmxyX21hdGNoX2lkIiwidGVhbTFfbmFtZSIsInRlYW0yX25hbWUiLCJ0ZWFtMV9zY29yZSIsInRlYW0yX3Njb3JlIiwidG91cm5hbWVudF9uYW1lIiwibWF0Y2hfdGltZSIsIm1hdGNoX2Zvcm1hdCIsIm1hdGNoX3VybCIsInNjcmFwZU1hdGNoRGV0YWlscyIsImdldE1hdGNoZXMiLCJleGlzdGluZ01hdGNoIiwibSIsIm1hcHNEYXRhIiwicGxheWVyU3RhdHMiLCJtYXBDb250YWluZXJzIiwibWFwQ29udGFpbmVyIiwibWFwRGF0YSIsInBhcnNlTWFwRGF0YSIsInBsYXllclJvd3MiLCJwbGF5ZXJSb3ciLCJwbGF5ZXJEYXRhIiwicGFyc2VQbGF5ZXJTdGF0cyIsInZvZFVybCIsInN0YXRzVXJsIiwidGVhbTEiLCJuYW1lIiwidGVhbTIiLCJ0b3VybmFtZW50IiwibWFwc19kYXRhIiwicGxheWVyX3N0YXRzIiwidm9kX3VybCIsInN0YXRzX3VybCIsIiRtYXAiLCJtYXBOYW1lRWxlbWVudCIsIm1hcE5hbWUiLCJyZXBsYWNlIiwibWFwV29yZHMiLCJzcGxpdCIsInZhbGlkTWFwcyIsIndvcmQiLCJjbGVhbldvcmQiLCJmb3VuZE1hcCIsInNvbWUiLCJzY29yZTEiLCJzY29yZTIiLCJhZ2VudHMiLCJhZ2VudEVsZW1lbnRzIiwiYWdlbnRFbCIsImFnZW50U3JjIiwiYWdlbnROYW1lIiwicG9wIiwibWFwX25hbWUiLCIkcm93IiwibmFtZUVsZW1lbnQiLCJwbGF5ZXJOYW1lIiwiYWdlbnRFbGVtZW50IiwiYWdlbnQiLCJzdGF0RWxlbWVudHMiLCJraWxscyIsImRlYXRocyIsImFzc2lzdHMiLCJhY3MiLCJrZCIsImFkciIsImhzUGVyY2VudCIsImZrIiwiZmQiLCJzdGF0c1RleHQiLCJzdGF0TnVtYmVycyIsInBsYXllcl9uYW1lIiwidGVhbSIsImtfZF9yYXRpbyIsIk1hdGgiLCJyb3VuZCIsImhlYWRzaG90X3BlcmNlbnRhZ2UiLCJmaXJzdF9raWxscyIsImZpcnN0X2RlYXRocyIsIm1hcHNfcGxheWVkIiwic2NyYXBlQWxsTWF0Y2hlcyIsInN0YXJ0VGltZSIsImVycm9ycyIsIm1hdGNoZXNTY3JhcGVkIiwibWF0Y2hlc1VwZGF0ZWQiLCJuZXdUZWFtcyIsIm5ld1RvdXJuYW1lbnRzIiwibG9nU2NyYXBpbmciLCJ1cGNvbWluZ01hdGNoZXMiLCJzYXZlTWF0Y2giLCJjb21wbGV0ZWRNYXRjaGVzIiwic3RhdHMiLCJnZXRTdGF0cyIsInRvdGFsX3RlYW1zIiwidG90YWxfdG91cm5hbWVudHMiLCJkdXJhdGlvbiIsInN1Y2Nlc3MiLCJtYXRjaGVzX3NjcmFwZWQiLCJtYXRjaGVzX3VwZGF0ZWQiLCJuZXdfdGVhbXMiLCJuZXdfdG91cm5hbWVudHMiLCJkdXJhdGlvbl9tcyIsIlN0cmluZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/scraper.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "?4c03":
/*!***********************!*\
  !*** debug (ignored) ***!
  \***********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("better-sqlite3");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:assert":
/*!******************************!*\
  !*** external "node:assert" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:assert");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ "node:console":
/*!*******************************!*\
  !*** external "node:console" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:console");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:diagnostics_channel":
/*!*******************************************!*\
  !*** external "node:diagnostics_channel" ***!
  \*******************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:diagnostics_channel");

/***/ }),

/***/ "node:dns":
/*!***************************!*\
  !*** external "node:dns" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:dns");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:events");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ "node:http2":
/*!*****************************!*\
  !*** external "node:http2" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http2");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ "node:perf_hooks":
/*!**********************************!*\
  !*** external "node:perf_hooks" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:perf_hooks");

/***/ }),

/***/ "node:querystring":
/*!***********************************!*\
  !*** external "node:querystring" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:querystring");

/***/ }),

/***/ "node:sqlite":
/*!******************************!*\
  !*** external "node:sqlite" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:sqlite");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:tls":
/*!***************************!*\
  !*** external "node:tls" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:tls");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "node:util/types":
/*!**********************************!*\
  !*** external "node:util/types" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util/types");

/***/ }),

/***/ "node:worker_threads":
/*!**************************************!*\
  !*** external "node:worker_threads" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:worker_threads");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/undici","vendor-chunks/parse5","vendor-chunks/iconv-lite","vendor-chunks/mime-db","vendor-chunks/axios","vendor-chunks/htmlparser2","vendor-chunks/entities","vendor-chunks/cheerio","vendor-chunks/css-select","vendor-chunks/encoding-sniffer","vendor-chunks/domutils","vendor-chunks/follow-redirects","vendor-chunks/css-what","vendor-chunks/form-data","vendor-chunks/get-intrinsic","vendor-chunks/domhandler","vendor-chunks/cheerio-select","vendor-chunks/whatwg-mimetype","vendor-chunks/asynckit","vendor-chunks/whatwg-encoding","vendor-chunks/dom-serializer","vendor-chunks/nth-check","vendor-chunks/parse5-htmlparser2-tree-adapter","vendor-chunks/combined-stream","vendor-chunks/mime-types","vendor-chunks/proxy-from-env","vendor-chunks/parse5-parser-stream","vendor-chunks/has-symbols","vendor-chunks/delayed-stream","vendor-chunks/function-bind","vendor-chunks/safer-buffer","vendor-chunks/domelementtype","vendor-chunks/es-set-tostringtag","vendor-chunks/get-proto","vendor-chunks/call-bind-apply-helpers","vendor-chunks/dunder-proto","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/gopd","vendor-chunks/es-define-property","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/boolbase","vendor-chunks/es-object-atoms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fscrape%2Froute&page=%2Fapi%2Fscrape%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscrape%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();